(window.webpackJsonp=window.webpackJsonp||[]).push([[401],{1189:function(s,n,a){"use strict";a.r(n);var e=a(4),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"mysql基础"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#mysql基础"}},[s._v("#")]),s._v(" mysql基础")]),s._v(" "),n("h2",{attrs:{id:"参考资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料：")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("菜鸟教程：https://www.runoob.com/mysql/mysql-select-database.html\n博客园：https://www.cnblogs.com/wupeiqi/articles/5713315.html\nC语言中文网：http://c.biancheng.net/view/7233.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("MYSQL[一]：https://www.cnblogs.com/wupeiqi/articles/5713315.html\nMYSQL[二]：https://www.cnblogs.com/wupeiqi/articles/5713323.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/wupeiqi/articles/5713330.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/wupeiqi/articles/5713330.html"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"一、数据库操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、数据库操作"}},[s._v("#")]),s._v(" "),n("strong",[s._v("一、数据库操作")])]),s._v(" "),n("h3",{attrs:{id:"_1、显示数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、显示数据库"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、显示数据库")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("show databases;\nSHOW DATABASES;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("默认数据库：\n　　mysql - 用户权限相关数据\n　　test - 用于用户测试数据\n　　information_schema - MySQL本身架构相关数据")]),s._v(" "),n("h3",{attrs:{id:"_2、创建、删除数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、创建、删除数据库"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、创建、删除数据库")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("# utf-8\nCREATE DATABASE 数据库名称 DEFAULT CHARSET utf8 COLLATE utf8_general_ci;\n\n# gbk\nCREATE DATABASE 数据库名称 DEFAULT CHARACTER SET gbk COLLATE gbk_chinese_ci;\n\n# utf8mb4\n# 这样就可以插入中文\ncreate database  dvadmin_warehouse charset utf8mb4;\ncreate database  dvadmin_warehouse default charset utf-8;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("drop databases 数据库名称;\n\ndrop databases db1;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3、使用数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、使用数据库"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3、使用数据库")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("use 数据库名\nuse db_name\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("显示当前使用的数据库中所有表：SHOW TABLES;")]),s._v(" "),n("h3",{attrs:{id:"_4、用户管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、用户管理"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4、用户管理")])]),s._v(" "),n("p",[s._v("把ip换成别人电脑的ip这样别人只能在那台电脑上登录mysql")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("创建用户\n    create user '用户名'@'IP地址' identified by '密码';\n删除用户\n    drop user '用户名'@'IP地址';\n修改用户\n    rename user '用户名'@'IP地址' to '新用户名'@'IP地址';\n修改密码\n    set password for '用户名'@'IP地址' = Password('新密码');\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create user 'alex'@'192.168.1.1' identified by '123456';  # 创建用户：alex密码：123456（只能在192.168.1.1这个IP才可以访问）\ncreate user 'alex'@'192.168.1.%' identified by '123456';  # 创建用户：alex密码：123456（IP等于前面三个192.168.1才可以访问）\ncreate user 'alex'@'%' identified by '123456';  # 创建用户：alex密码：123456（所有网络都可以访问）\n\nrename user 'alex'@'%' to 'alex1'@'1234567';  # 修改用户\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[s._v("PS：用户权限相关数据保存在mysql数据库的user表中，所以也可以直接对其进行操作（不建议）")]),s._v(" "),n("p",[n("strong",[s._v("可以在mysql表中的user查看用户")])]),s._v(" "),n("h3",{attrs:{id:"_5、用户授权管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、用户授权管理"}},[s._v("#")]),s._v(" "),n("strong",[s._v("5、用户授权管理")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("show grants for '用户'@'IP地址'                  -- 查看权限\ngrant  权限 on 数据库.表 to   '用户'@'IP地址'      -- 授权\nrevoke 权限 on 数据库.表 from '用户'@'IP地址'      -- 取消权限\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("grant all privileges on db1.tb1 TO '用户名'@'IP'   # 给用户除grant外的所有权限，只让它访问db1数据库的tb1表\n\ngrant select on db1.* TO '用户名'@'IP'  # 给用户select仅查权限,让它可以访问db2数据库下的所有表\n\ngrant select,insert on *.* TO '用户名'@'IP'   # 给用户查和插入权限,让它可以访问所有数据库下的所有表\n\nrevoke select on db1.tb1 from '用户名'@'IP'  # 给用户select仅查权限,让它可以访问db2数据库下的tb1表权限\n\ngrant all privileges on db1.* to 'alex'@'%';\nrevoke select on db1.* from 'alex'@'%'; # 删除用户的查看权限\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[n("strong",[s._v("权限")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("all privileges          除grant外的所有权限\nselect                  仅查权限\nselect,insert           查和插入权限\n...\nusage                   无访问权限\nalter                   使用alter table\nalter routine           使用alter procedure和drop procedure\ncreate                  使用create table\ncreate routine          使用create procedure\ncreate temporary tables 使用create temporary tables\ncreate user             使用create user、drop user、rename user和revoke  all privileges\ncreate view             使用create view\ndelete                  使用delete\ndrop                    使用drop table\nexecute                 使用call和存储过程\nfile                    使用select into outfile 和 load data infile\ngrant option            使用grant 和 revoke\nindex                   使用index\ninsert                  使用insert\nlock tables             使用lock table\nprocess                 使用show full processlist\nselect                  使用select\nshow databases          使用show databases\nshow view               使用show view\nupdate                  使用update\nreload                  使用flush\nshutdown                使用mysqladmin shutdown(关闭MySQL)\nsuper                   􏱂􏰈使用change master、kill、logs、purge、master和set global。还允许mysqladmin􏵗􏵘􏲊􏲋调试登陆\nreplication client      服务器位置的访问\nreplication slave       由复制从属使用\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("p",[n("strong",[s._v("数据库.表")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("对于目标数据库以及内部其他：\n            数据库名.*           数据库中的所有\n            数据库名.表          指定数据库中的某张表\n            数据库名.存储过程     指定数据库中的存储过程\n            *.*                所有数据库\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("strong",[s._v("用户名@IP地址")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("用户只能在改IP下才能访问\n            用户名@192.168.1.%   用户只能在改IP段下才能访问(通配符%表示任意)\n            用户名@%             用户可以再任意IP下访问(默认IP地址为%)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("特殊的：（立即生效）")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("flush privileges，将数据读取到内存中，从而立即生效。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_6、忘记密码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6、忘记密码"}},[s._v("#")]),s._v(" "),n("strong",[s._v("6、忘记密码")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("# 启动免授权服务端\nmysqld --skip-grant-tables\n\n# 客户端\nmysql -u root -p\n\n# 修改用户名密码\nupdate mysql.user set authentication_string=password('666') where user='root';\nflush privileges;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h2",{attrs:{id:"二、数据库基本操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、数据库基本操作"}},[s._v("#")]),s._v(" "),n("strong",[s._v("二、数据库基本操作")])]),s._v(" "),n("h3",{attrs:{id:"_1、创建表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建表"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、创建表")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create table 表名(\n    列名  类型  是否可以为空 默认值，\n    列名  类型  是否可以为空 自增 主键\n)ENGINE=InnoDB DEFAULT CHARSET=utf8\n\ninnodb # 支持事物，几个同时进行操作一个出错回滚到开始(原子性操作)\nmyisam # 不支持事物\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"_2-1-基本创建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-基本创建"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.1 基本创建")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create table t1(\n    id int,\n    name char(10)\n) engine=innodb default charset='utf8mb4';\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h4",{attrs:{id:"_2-2-是否可空"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-是否可空"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.2 是否可空")])]),s._v(" "),n("p",[n("strong",[s._v("是否可空，null表示空，非字符串（默认可以为空）")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("not null    - 不可空\nnull        - 可空\n\ncreate table t2(\n    id int not null,  # 必须要添加数据了\n    name char(10)\n) engine=innodb default charset='utf8mb4';\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"_2-3-默认值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-默认值"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.3 默认值")])]),s._v(" "),n("p",[n("strong",[s._v("默认值，创建列时可以指定默认值，当插入数据时如果未主动设置，则自动添加默认值")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("defalut 值\n\ncreate table t3(\n    id int not null default 2,  # 添加默认值\n    name char(10)\n) engine=innodb default charset='utf8mb4';\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h4",{attrs:{id:"_2-4-自增"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-自增"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.4 自增")])]),s._v(" "),n("p",[n("strong",[s._v("自增，如果为某列设置自增列，插入数据时无需设置此列，默认将自增（！表中只能有一个自增列）")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("auto_increment\nauto_increment primary key\n\n二种方式，因为自增必须加索引所有有二种方式\n# 方式一：\ncreate table t4(\n    id int not null auto_increment primary key,\n    name char(10)\n) engine=innodb default charset='utf8mb4';\n\n# 方式二：\ncreate table tb1(\n    id int not null auto_increment,\n    name int null,\n    index(nid)\n)engine=innodb default charset='utf8mb4';\n\ncreate table t4(\n    id int not null auto_increment primary key,\n    name char(10)\n) engine=innodb default AUTE_INCREMENT=20 charset='utf8mb4';# 自增起始值\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("**注意**\n1、对于自增列，必须是索引（含主键）。\n2、对于自增可以设置步长和起始值\n# 基于会话级别：\nshow session variables like 'auto_inc%';  # 查看全局变量\nset session auto_increment_increment=2;  # 设置步长\nset session auto_increment_offset=10;  # 起始值\n# 基于全局级别：\nshow global  variables like 'auto_inc%';\nset global auto_increment_increment=2;\nset global auto_increment_offset=10;\n\n# 也可以直接修改自增的起始值\nalter table t1 AUTE_INCREMENT=20  # 修改t1表中自增的值起始值\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h4",{attrs:{id:"_2-5-主键"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-主键"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.5 主键")])]),s._v(" "),n("p",[n("strong",[s._v("主键，一种特殊的唯一索引，不允许有空值，如果主键使用单个列，则它的值必须唯一，如果是多列，则其组合必须唯一。")])]),s._v(" "),n("p",[s._v("主键：表示约束（不能重复不能有空值）；加速查找")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("primary key\n\ncreate table tb1(\n    nid int not null auto_increment primary key,\n    num int null\n)\n或\ncreate table tb1(\n     nid int not null,\n     num int not null,\n     primary key(nid,num)\t# 可以有多个主键\n)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h4",{attrs:{id:"_2-6-外键"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-外键"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.6 外键")])]),s._v(" "),n("p",[n("strong",[s._v("外键，一个特殊的索引，只能是指定内容")])]),s._v(" "),n("p",[s._v("! 外键名称是唯一的，外键可以有多个字段但必须是主键和不能为空")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("constraint 外键名称 foreign key (一对多字段) references 关联表(关联表字段)\n\n! 外键名称是唯一的，外键可以有多个字段但必须是主键和不能为空\n\nconstraint fk_class_student foreign key (class_id，class_name) references class(id,name)\n\n\n# 班级表(一个班级有多个学生)\ncreat table class(\n    id int not null primary key,\n    name char(16) not null\n)\n\n# 学生表\ncreate table student(\n    id int not null primary key,\n    name char(32) null ,\n    class_id int not null,\n    constraint fk_class_student foreign key (class_id) references class(id)\n)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h4",{attrs:{id:"_2-7-一对一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-一对一"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.7 一对一")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("# 用户信息\ncreat table userinfo(\n    id int not null auto_increment primary key,\n    name char(16) not null,\n)engine=innodb default charset=utf8;\n\n# 用户密码\ncreate table admin(\n    id int not null primary key,\n    username varchar(32) not null ,\n    password varchar(32) not null ,\n    user_id int not null,\n    unique uq_u1 (user_id)\n    constraint fk_admin_userinfo foreign key (user_id) references userinfo(id)\n)engine=innodb default charset=utf8;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h4",{attrs:{id:"_2-8-一对多"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-一对多"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.8 一对多")])]),s._v(" "),n("p",[s._v("一个班级有多个学生，")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("# 班级表(一个班级有多个学生)\ncreat table class(\n    id int not null primary key,\n    caption char(16) not null\n)\n\n# 学生表\ncreate table student(\n    sid int not null primary key,\n    sname char(32) null ,\n    gender ENUM('男','女'),\n    class_id int not null,\n    constraint fk_class_student foreign key (class_id) references class(id)\n)\n\n# 老师表\ncreat table teacher(\n    tid int not null primary key,\n    tname char(16) not null\n)\n\n# 课程表表\ncreat table course(\n    cid int not null primary key,\n    cname char(16) not nullk,\n    tearch_id int not null,\n    constraint fk_teacher_course foreign key (tearch_id) references teacher(tid)\n)\n\n# 成绩表\ncreat table score(\n    sid int not null primary key,\n    student_id int not null,\n    corse_id int not null,\n    number int,\n    constraint fk_student_score foreign key (student_id) references student(sid),\n    constraint fk_student_course foreign key (corse_id) references course(cid)\n)\n\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br")])]),n("h4",{attrs:{id:"_2-9-多对多"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-9-多对多"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.9 多对多")])]),s._v(" "),n("p",[s._v("一个用户可以访问多个服务器，一个服务器可以被多个人访问。")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("# 用户信息\ncreat table userinfo(\n    id int auto_increment primary key,\n    name char(16) not null,\n)engine=innodb default charset=utf8;\n\n# 服务器\ncreat table host(\n    id int auto_increment primary key,\n    hostname char(16) not null,\n)engine=innodb default charset=utf8;\n\n# 用户密码\ncreate table user_host(\n    id int not null primary key,\n\tuserid int not null,\n    hostid int not null,\n    unique uq_u1 (userid,hostid),\n    constraint fk_1 foreign key (userid) references userinfo(id),\n     constraint fk_2 foreign key (hostid) references host(id)\n)engine=innodb default charset=utf8;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("h3",{attrs:{id:"_2、删除表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、删除表"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、删除表")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("drop table 表名\n\ndrop table t1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3、清空表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、清空表"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3、清空表")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("delete from 表名\ntruncate table 表名\t# 清空表中的数据\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_4、修改表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、修改表"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4、修改表")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("添加列：alter table 表名 add 列名 类型\n\n删除列：alter table 表名 drop column 列名\n\n修改列：\n        alter table 表名 modify column 列名 类型;  -- 类型\n        alter table 表名 change 原列名 新列名 类型; -- 列名，类型\n\n添加主键：\n        alter table 表名 add primary key(列名);\n\n删除主键：\n        alter table 表名 drop primary key;\n        alter table 表名  modify  列名 int, drop primary key;\n\n添加外键：alter table 从表 add constraint 外键名称（形如：FK_从表_主表） foreign key 从表(外键字段) references 主表(主键字段);\n\n删除外键：alter table 表名 drop foreign key 外键名称\n\n修改默认值：ALTER TABLE testalter_tbl ALTER i SET DEFAULT 1000;\n\n删除默认值：ALTER TABLE testalter_tbl ALTER i DROP DEFAULT;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h3",{attrs:{id:"_5、基本数据类型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、基本数据类型"}},[s._v("#")]),s._v(" "),n("strong",[s._v("5、基本数据类型")])]),s._v(" "),n("p",[s._v("MySQL的数据类型大致分为：数值、时间和字符串")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("更多参考：\nhttp://www.runoob.com/mysql/mysql-data-types.html\nhttp://dev.mysql.com/doc/refman/5.7/en/data-type-overview.html\nhttps://www.cnblogs.com/wupeiqi/articles/5713315.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v(" \t\tenum\n            枚举类型，\n            An ENUM column can have a maximum of 65,535 distinct elements. (The practical limit is less than 3000.)\n            示例：\n                CREATE TABLE shirts (\n                    name VARCHAR(40),\n                    size ENUM('x-small', 'small', 'medium', 'large', 'x-large')\n                );\n                INSERT INTO shirts (name, size) VALUES ('dress shirt','large'), ('t-shirt','medium'),('polo shirt','small');\n\n        set\n            集合类型\n            A SET column can have a maximum of 64 distinct members.\n            示例：\n                CREATE TABLE myset (col SET('a', 'b', 'c', 'd'));\n                INSERT INTO myset (col) VALUES ('a,d'), ('d,a'), ('a,d,a'), ('a,d,d'), ('d,a,d');\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h3",{attrs:{id:"_6、数据库导入导出"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6、数据库导入导出"}},[s._v("#")]),s._v(" "),n("strong",[s._v("6、数据库导入导出")])]),s._v(" "),n("p",[s._v("导出现有数据库数据：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("mysqldump -u用户名 -p密码 数据库名称 >导出文件路径 # 结构+数据")])]),s._v(" "),n("li",[n("p",[s._v("mysqldump -u用户名 -p密码 -d 数据库名称 >导出文件路径 # 结构")])])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("mysqldump -u root -p  db1 > db1.sql\nmysqldump -u root -p  -d db1 > db1.sql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("导入现有数据库数据：")]),s._v(" "),n("ul",[n("li",[s._v("mysqldump -u root -p密码 数据库名称 < 文件路径")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("mysqldump -u root -p db2 < db1.sql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"三、表内容操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#三、表内容操作"}},[s._v("#")]),s._v(" "),n("strong",[s._v("三、表内容操作")])]),s._v(" "),n("h3",{attrs:{id:"_1、增"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、增"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、增")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("insert into 表 (列名,列名...) values (值,值,值...);\ninsert into 表 (列名,列名...) values (值,值,值...),(值,值,值...);\ninsert into 表 (列名,列名...) select (列名,列名...) from 表;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('insert into t1(id,name) values(1,"你");  # 添加一条数据\ninsert into t1(id,name) values(1,"你"),(2,"我")..;  # 添加多条数据\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h4",{attrs:{id:"_1-1-将t1表数据插入t2表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-将t1表数据插入t2表"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.1 将t1表数据插入t2表")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('insert into 表 (列名,列名...) select (列名,列名...) from 表;\n\n\ncreate table t6(id int,name varchar(10))engine=innodb default charset=utf8;\ncreate table t7(id int,name varchar(10))engine=innodb default charset=utf8;  # 创建表\ninsert into t6(id,name) values(1,"a"),(2,"b");  # 插入数据\ninsert into t7(id,name) select id,name from t6;\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"_2、删"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、删"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、删")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("delete from 表;\ndelete from t1;\t# t1表中的数据都删除了\n\ndelete from 表 where 条件;\ndelete from 表 where id＝1 and name＝'alex';  # 删除id=1并name=alex的数据\ndelete from 表 where id＝1 or name＝'alex';  # 删除id=1并name=alex的数据\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"_3、改"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、改"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3、改")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("update 表 set 修改内容\nupdate t1 set age=18;  # 把表中的所有数据都改成10\n\nupdate 表 set 修改内容 where 条件\nupdate 表 set name ＝ 'alex' where id>1  # 修改id大于1的name='alex'\nupdate 表 set name ＝ 'alex',age=18 where id>1 and name='alex1'  # 修改id大于1name='alex1'，修改为name=alex,age=18\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"_4、查"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、查"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4、查")])]),s._v(" "),n("h4",{attrs:{id:"_4-1-普通条件查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-普通条件查询"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.1 普通条件查询")])]),s._v(" "),n("p",[s._v("in")]),s._v(" "),n("p",[s._v("not in")]),s._v(" "),n("p",[s._v("betwwen and")]),s._v(" "),n("p",[s._v("!=")]),s._v(" "),n("p",[s._v("and")]),s._v(" "),n("p",[s._v("or")]),s._v(" "),n("p",[n("strong",[s._v("select  from 表")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from t1;\t# 查询所有\nselect id,name from t2;\t # 指定查询手段\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("select  from 表 where 条件")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select nid,name,gender from 表 where id > 1;\t# 查询id大于1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("别名（as）")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select id,name as n from t2;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("区间（between  and）：select  from 表 where id between 开始 and 结束;")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from t1 where id between 5 and 16;  # 查找t1表中id[5,16] 5到16的数据\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("在，不在（in，not in）")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from t1 where id in (11,22,33);  # 找id在()中的\nselect * from t1 where id not in (11,22,33)  # 不在\nselect * from t1 where id in (select nid from 表)  # 嵌套跨表\n\nid != 1\nid > 1\nid >= 1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"_4-2-通配符"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-通配符"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.2 通配符")])]),s._v(" "),n("p",[n("strong",[s._v("%：多个字符串")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from 表 where name like 'ale%'  - ale开头的所有（多个字符串）\nselect * from 表 where name like '%ale'  - ale结尾的所有（多个字符串）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("_"),n("strong",[s._v("：一个字符")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from 表 where name like 'ale_'  - ale开头的所有（一个字符）\n\nselect * from 表 where name like '_ale'  - ale结尾的所有（一个字符）\n\nselect * from 表 where name like '___ale'  - ale结尾的所有（可以使用多个_，一个_表示一个字符）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h4",{attrs:{id:"_4-3-限制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-限制"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.3 限制")])]),s._v(" "),n("p",[n("strong",[s._v("limit")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from 表 limit 5;            - 前5行\nselect * from 表 limit 1,5;          - 从第1行开始取后5行\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[n("strong",[s._v("limit  offset")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from 表 limit 5 offset 1    - 从第1行开始取后5行\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"_4-4-排序"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-排序"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.4 排序")])]),s._v(" "),n("p",[n("strong",[s._v("order_by 列 desc")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from 表 order by 列 asc              - 根据 “列” 从小到大排列\n\nselect * from t7 order by id asc;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("order_by 列 asc")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from 表 order by 列 desc             - 根据 “列” 从大到小排列\n\nselect * from t7 order by id desc;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("可以合并在一起（解决有重复的可以添加字段）")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from 表 order by 列1 desc,列2 asc    - 根据 “列1” 从大到小排列，如果相同则按列2从小到大排序\n\nselect * from t7 order by id desc,sid asc;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h4",{attrs:{id:"_4-5-分组"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-5-分组"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.5 分组")])]),s._v(" "),n("p",[n("strong",[s._v("group by")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select num from 表 group by num\nselect num,nid from 表 group by num,nid\nselect num,nid from 表  where nid > 10 group by num,nid order nid desc\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("group by 搭配聚合函数：count,max,min,sum,avg")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select num,nid,count(*),sum(score),max(score),min(score) from 表 group by num,nid\n\nselect count(id),name from t7 group by id;\t# 以id进行分组，并统计id的个数\nselect count(id),name from t7 group by id order by id desc; # 并排序\nselect count(id),name from t7 where id>2 group by id order by id desc;\t# id>2\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("strong",[s._v("!使用聚合函数当条件筛选是要加having关键字")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select num from 表 group by num having max(id) > 10\n\nselect count(id),max(id),name from t7 group by id having max(id)>2  order by id desc;  # 聚合关键字max(id)>2\n\nselect count(id) from t1;\nselect student_id,avg(num) as achievement from score  group by student_id having achievement>60;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[n("strong",[s._v("注意：group by 必须在where之后，order by之前")])]),s._v(" "),n("h4",{attrs:{id:"_4-6-连表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-6-连表"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.6 连表")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('create table t34(\n    id int auto_increment primary key ,\n    name char(10) not null,\n    parent_id int,\n    constraint fkkb_d foreign key (parent_id) references t33(sid)\n) engine=innodb default charset=\'utf8mb4\';\n\ncreate table t33(\n    sid int auto_increment primary key,\n    name char(10)\n) engine=innodb default charset=\'utf8mb4\';\n\ninsert into t33(name) values("老师"),("校长"),("秘书");\ninsert into t34(name,parent_id) values("YYS",1),("aab",2),("ccc",3);\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[n("strong",[s._v("注意：连接的表有重名的话使用 类名.字段")])]),s._v(" "),n("p",[s._v("连表方式一：")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select A.num, A.name, B.name\nfrom A,B\nWhere A.nid = B.nid\n\nselect id,t34.name,parent_id,sid,t33.name\nfrom t33,t34\nwhere t34.parent_id=t33.sid;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("连表方式二：inner join")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select A.num, A.name, B.name\nfrom A inner join B\non A.nid = B.nid\n\nselect id,t34.name,parent_id,sid,t33.name\nfrom t33 inner join t34\nwhere t34.parent_id=t33.sid;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("p",[s._v("连表方式三：left join 左边表全显示")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("A表所有显示，如果B中无对应关系，则值为null\nselect A.num, A.name, B.name\nfrom A left join B\non A.nid = B.nid\n\nselect id,t34.name,parent_id,sid,t33.name\nfrom t33 left join t34\non t34.parent_id=t33.sid;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("连表方式四：right join 右边表全显示")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("B表所有显示，如果B中无对应关系，则值为null\nselect A.num, A.name, B.name\nfrom A right join B on A.nid = B.nid\n\nselect id,t34.name,parent_id,sid,t33.name\nfrom t33 right join t34 on t34.parent_id=t33.sid;\n\n# 可以连接很多表\nselect score.sid,student.sid\nfrom score\nleft join student on score.student_id=student.sid\nleft join course on score.course_id=course.cid\nleft join class on student.class_id=class.cid\nleft join teacher on course.teacher_id=teacher.tid\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("p",[n("strong",[s._v("union:自动去重,union all：不去重")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select sid,name from db1\nunion\nselect sid,name from db2\n-- 如果字段一样就去重\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h4",{attrs:{id:"_4-7-distinct去重"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-7-distinct去重"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.7 distinct去重")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('select distinct tid from course left join teacher on course.teacher_id=teacher.tid where tname like "李平老师";\n\n给distinct tid字段去重，效率不高，用分组好点group by\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h4",{attrs:{id:"_4-8-子查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-8-子查询"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.8 子查询")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('    select sc.student_id,\n        (select num from score left join course on score.course_id = course.cid where course.cname = "生物" and score.student_id=sc.student_id) as sy,\n        (select num from score left join course on score.course_id = course.cid where course.cname = "物理" and score.student_id=sc.student_id) as wl,\n        (select num from score left join course on score.course_id = course.cid where course.cname = "体育" and score.student_id=sc.student_id) as ty,\n        count(sc.course_id),\n        avg(sc.num)\n    from score as sc\n    group by student_id desc\n\n select\n\ts1.student_id,\n\t(select num from score as s2 where s2.course_id=s1.course_id order by num desc limit 0,1) as num1,\n\t(select num from score as s2 where s2.course_id=s1.course_id order by num desc limit 1,1) as num2,\n\t(select num from score as s2 where s2.course_id=s1.course_id order by num desc limit 2,1) as num3\nfrom score as s1;\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h4",{attrs:{id:"_4-9-查询添加条件判断语句case"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-9-查询添加条件判断语句case"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.9 查询添加条件判断语句case")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("case when 条件 then 条件成立 else 条件不成立 END\n\nselect  course_id,max(num),min(num),case when min(num) < 10 then 0 else min(num) END from score group by course_id ;\n\n-- 按各科平均成绩从低到高和及格率的百分数从高到低顺序；\nSELECT\n\tcourse_id,\n\tavg( num ),\n\tsum( CASE WHEN num < 60 THEN 0 ELSE 1 END ) / sum( 1 ) AS jgl\nFROM\n\tscore\nGROUP BY\n\tcourse_id\nORDER BY\n\tavg( num ) ASC,\n\tjgl DESC;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])]),n("h4",{attrs:{id:"_4-10-if-三元运算"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-10-if-三元运算"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.10 if 三元运算")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("if(isnull(条件),条件成功,条件失败)\n\nSELECT\n\ttname,\n\tcname,\n\tavg( if(isnull(score.num),0,score.num) )\nFROM\n\tteacher,\n\tcourse,\n\tscore\nWHERE\n\tteacher.tid = course.teacher_id\n\tAND score.course_id = course.cid\nGROUP BY\n\tcourse_id\nORDER BY\n\tavg( num ) DESC;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h4",{attrs:{id:"_4-11-临时表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-11-临时表"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.11 临时表")])]),s._v(" "),n("p",[s._v("临时表就是把放到内存里面")]),s._v(" "),n("p",[s._v("(select  from score where number>60)：就是把这个当成一张表用")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("临时表：(select * from score where number>60) 这里有几列，select 就可以选择几个\n\nselect sid,number from (select * from score where number>60) as B;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_5、查看表详细"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、查看表详细"}},[s._v("#")]),s._v(" "),n("strong",[s._v("5、查看表详细")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("desc 表名;\ndesc t1;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_6、查看表的创建命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6、查看表的创建命令"}},[s._v("#")]),s._v(" "),n("strong",[s._v("6、查看表的创建命令")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("show create table 表名;\nshow create table t1;\n\nshow create table t1 \\G;  # 更规范\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"_7、唯一索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7、唯一索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("7、唯一索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("unique uq1(num)\t # [唯一索引]\nunique uq1(num,sname)  # [联合索引]\n\ncreate table t1(\n\tid int not null auto_increment primary key,\n\tnum int,\n\tsname char(10),\n\t# unique uq1(num)\t # 约束num字段的值不能重复（可以为空） [唯一索引]\n    unique uq1(num,sname)  # 新的数据num和sname不能重复（可以为空）[联合索引]\n)\n\n# num=1 sname=1 (1,1)\n# num=1 sname=2 (1,2) # 这样就可以 二个加起来不一样就欧克\nps:\n\t唯一索引：\n\t\t约束不能重复（可以为空）\n\t\t主键，不能重复（不可以为空）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h2",{attrs:{id:"四、mysql练习题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#四、mysql练习题"}},[s._v("#")]),s._v(" "),n("strong",[s._v("四、MYSQL练习题")])]),s._v(" "),n("p",[s._v("题目："),n("a",{attrs:{href:"https://www.cnblogs.com/wupeiqi/articles/5729934.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/wupeiqi/articles/5729934.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("参考答案："),n("a",{attrs:{href:"https://www.cnblogs.com/wupeiqi/p/5748496.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/wupeiqi/p/5748496.html"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"_1、表关系"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、表关系"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、表关系")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("# 班级表(一个班级有多个学生)\ncreate table class(\n    id int auto_increment primary key,\n    caption char(16) not null\n)engine=innodb default charset='utf8mb4';\n\n# 学生表\ncreate table student(\n    sid int auto_increment primary key,\n    sname char(32) null ,\n    gender ENUM('男','女'),\n    class_id int not null,\n    constraint fk_class_student foreign key (class_id) references class(id)\n)engine=innodb default charset='utf8mb4';\n\n# 老师表\ncreate table teacher(\n    tid int auto_increment primary key,\n    tname char(16) not null\n)engine=innodb default charset='utf8mb4';\n\n# 课程表表\ncreate table course(\n    cid int auto_increment primary key,\n    cname char(16) not null,\n    tearch_id int not null,\n    constraint fk_teacher_course foreign key (tearch_id) references teacher(tid)\n)engine=innodb default charset='utf8mb4';\n\n# 成绩表\ncreate table score(\n    sid int auto_increment primary key,\n    student_id int not null,\n    corse_id int not null,\n    number int,\n    unique uq1(student_id,corse_id),\n    constraint fk_student_score foreign key (student_id) references student(sid),\n    constraint fk_student_course foreign key (corse_id) references course(cid)\n)engine=innodb default charset='utf8mb4';\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("h3",{attrs:{id:"_2、操作表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、操作表"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、操作表")])]),s._v(" "),n("ul",[n("li",[n("ul",[n("li",[s._v('男女生的数量\n-- select gender,count("id") from student group by gender;')])])]),s._v(" "),n("li",[n("ul",[n("li",[s._v("每个班级所有的学生\n-- select caption,count(sname) from student left join class on student.class_id=class.id group by caption;")])])])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('1、自行创建测试数据\ninsert into class(caption) values("三年二班"),("一年三班"),("三年一班");\ninsert into student(sname,gender,class_id) values("钢弹","女",1),("铁锤","女",1),("山炮","男",2);\ninsert into teacher(tname) values("波多"),("苍空"),("饭岛");\ninsert into course(cname,tearch_id) values("生物",1),("体育",1),("物理",2);\ninsert into score(student_id,corse_id,number) values(1,1,60),(1,2,59),(2,2,100);\n\n2、查询“生物”课程比“物理”课程成绩高的所有学生的学号；\n-- 查询各自生物和物理的数据，进行连表\nSELECT\n\tA.student_id,\n\tA.num AS sw_cj,\n\tA.cname AS sw_cname,\n\tB.num AS wl_cj,\n\tB.cname AS wl_cname\nFROM\n\t( SELECT * FROM score LEFT JOIN course ON score.course_id = course.cid WHERE cname LIKE "生物" ) AS A\n\tLEFT JOIN ( SELECT * FROM score LEFT JOIN course ON score.course_id = course.cid WHERE cname LIKE "物理" ) AS B ON A.student_id = B.student_id\nWHERE\n\tA.num > B.num;\n\n3、查询平均成绩大于60分的同学的学号和平均成绩；\n-- 1.查找所有同学成绩;2.用户group by分组聚合出所有平均成绩;3.在使用where筛选大于60分的使用成绩（！用了聚合函数要记住用having）\nSELECT\n\tstudent_id,\n\tavg( num ) AS achievement\nFROM\n\tscore\nGROUP BY\n\tstudent_id\nHAVING\n\tachievement > 60;\n\n4、查询所有同学的学号、姓名、选课数、总成绩；\n# 方法一：\nSELECT\n\tstudent.sid,\n\tsname,\n\tA.count1,\n\tA.sum1\nFROM\n\tstudent\n\tRIGHT JOIN (\nSELECT\n\tsid,\n\tstudent_id,\n\tcourse_id,\n\tnum,\n\tcount( student_id ) AS count1,\n\tsum( num ) AS sum1\nFROM\n\tscore\nGROUP BY\n\tstudent_id\n\t) AS A ON student.sid = A.student_id;\n\n# 方法二：\nSELECT\n\tstudent.sid,\n\tsname,\n\tcount( score.student_id ),\n\tsum( num )\nFROM\n\tscore\n\tLEFT JOIN student ON student.sid = score.student_id\nGROUP BY\n\tstudent_id;\n\n5、查询姓“李”的老师的个数；\nSELECT\n\tcount( tid )\nFROM\n\tteacher\nWHERE\n\ttname LIKE "李%";\n\n6、查询没学过“叶平”老师课的同学的学号、姓名；\n-- 1.获取李平老师授课的id;2.在得到成绩表中course_id是李平的授课id的，所有学生id;3.查询所有学生表id不在里面的\nSELECT\n\tstudent.sid,\n\tsname\nFROM\n\tstudent\nWHERE\n\tstudent.sid NOT IN (\nSELECT DISTINCT\n\tstudent_id\nFROM\n\tscore\nWHERE\n\tscore.course_id IN ( SELECT cid FROM course LEFT JOIN teacher ON course.teacher_id = teacher.tid WHERE tname LIKE "李平老师" )\n\t);\n\n7、查询学过“001”并且也学过编号“002”课程的同学的学号、姓名；\nSELECT\n\t*\nFROM\n\t( SELECT student_id, course_id FROM score WHERE course_id = 1 OR course_id = 2 ) AS A\n\tLEFT JOIN student ON A.student_id = student.sid\nGROUP BY\n\tstudent_id\nHAVING\n\tcount( student_id ) = 2;\n\n8、查询学过“叶平”老师所教的所有课的同学的学号、姓名；\n-- 1.拿到老师的所有授课id；2.查找score表所有是老师id的所有数据，通过student_id分组，在通过数量=授课数量进行筛选\nSELECT\n\tstudent.sid,\n\tsname\nFROM\n\tstudent\n\tRIGHT JOIN (\nSELECT\n\tstudent_id\nFROM\n\tscore\nWHERE\n\tcourse_id IN ( SELECT cid FROM course LEFT JOIN teacher ON teacher.tid = course.teacher_id WHERE tname LIKE "李平老师" )\nGROUP BY\n\tstudent_id\nHAVING\n\tcount( course_id ) = ( SELECT count( cid ) FROM course LEFT JOIN teacher ON teacher.tid = course.teacher_id WHERE tname LIKE "李平老师" )\n\t) AS A ON student.sid = A.student_id;\n\n9、查询课程编号“002”的成绩比课程编号“001”课程低的所有同学的学号、姓名；\n-- 分别查询所有002，001对应所有的成绩；然后在进行连表筛选\nSELECT\n\tsid,\n\tsname\nFROM\n\tstudent\n\tRIGHT JOIN (\nSELECT\n\tA.student_id,\n\tA.num AS cj2,\n\tB.num AS cj1\nFROM\n\t( SELECT * FROM score WHERE course_id = 2 ) AS A\n\tLEFT JOIN ( SELECT * FROM score WHERE course_id = 1 ) AS B ON A.student_id = B.student_id\nWHERE\n\tB.num < A.num\n\t) AS C ON C.student_id = student.sid;\n\n10、查询有课程成绩小于60分的同学的学号、姓名；\nSELECT\n\tstudent.sid,\n\tsname\nFROM\n\tstudent,\n\t( SELECT student_id FROM score WHERE num < 60 GROUP BY student_id ) AS A\nWHERE\n\tA.student_id = student.sid;\n\n11、查询没有学全所有课的同学的学号、姓名；\n-- 先查询所有课程的数量，在查询成绩表然后进行分组和聚合判断数量是不是等于课程的数量\nSELECT\n\t*\nFROM\n\tscore,\n\tstudent\nWHERE\n\tstudent.sid = score.student_id\nGROUP BY\n\tstudent_id\nHAVING\n\tcount( student_id ) < ( SELECT count( 1 ) FROM course );\n\n12、查询至少有一门课与学号为“001”的同学所学相同的同学的学号和姓名；\n--     思路：\n--         获取 001 同学选择的所有课程\n--         获取课程在其中的所有人以及所有课程\n--         根据学生筛选，获取所有学生信息\n--         再与学生表连接，获取姓名\nSELECT\n\tstudent.sid,\n\tsname,\n\tcount1\nFROM\n\tstudent,\n\t(\nSELECT\n\tstudent_id,\n\tcount( course_id ) AS count1\nFROM\n\tscore\nWHERE\n\tstudent_id != 1\n\tAND course_id IN ( SELECT course_id FROM score WHERE student_id = 1 )\nGROUP BY\n\tstudent_id\n\t) AS A\nWHERE\n\tA.student_id = student.sid\n\n13、查询至少学过学号为“001”同学所选课程中任意一门课的其他同学学号和姓名；\n-- 先找到和001的学过的所有人\n-- 然后个数 ＝ 001所有学科     ＝＝》 其他人可能选择的更多\nSELECT\n\tstudent.sid,\n\tsname,\n\tcount( course_id )\nFROM\n\tscore,\n\tstudent\nWHERE\n\tstudent.sid = score.student_id\n\tAND student_id != 1\n\tAND course_id IN ( SELECT course_id FROM score WHERE student_id = 1 )\nGROUP BY\n\tstudent_id\nHAVING\n\tcount( course_id ) = ( SELECT count( course_id ) FROM score WHERE student_id = 1 );\n\n14、查询和“002”号的同学学习的课程完全相同的其他同学学号和姓名；\n--  个数相同\n-- 002学过的也学过\nSELECT\n\tstudent_id,\n\tsname\nFROM\n\tscore\n\tLEFT JOIN student ON score.student_id = student.sid\nWHERE\n\tstudent_id IN (\nSELECT\n\tstudent_id\nFROM\n\tscore\nWHERE\n\tstudent_id != 1\nGROUP BY\n\tstudent_id\nHAVING\n\tcount( course_id ) = ( SELECT count( 1 ) FROM score WHERE student_id = 1 )\n\t)\n\tAND course_id IN ( SELECT course_id FROM score WHERE student_id = 1 )\nGROUP BY\n\tstudent_id\nHAVING\n\tcount( course_id ) = ( SELECT count( 1 ) FROM score WHERE student_id = 1 )\n\n15、删除学习“叶平”老师课的SC表记录；\nDELETE\nFROM\n\tscore\nWHERE\n\tcourse_id IN ( SELECT cid FROM course, teacher WHERE course.teacher_id = teacher.tid AND teacher.tname LIKE \'李平老师2\' );\n\n16、向SC表中插入一些记录，这些记录要求符合以下条件：①没有上过编号“002”课程的同学学号；②插入“002”号课程的平均成绩；\n--     思路：\n--         由于insert 支持\n--                 inset into tb1(xx,xx) select x1,x2 from tb2;\n--         所有，获取所有没上过002课的所有人，获取002的平均成绩\nINSERT INTO score ( student_id, course_id, num ) SELECT\nsid,\n2,\n( SELECT avg( num ) FROM score WHERE course_id = 2 )\nFROM\n\tstudent\nWHERE\n\tsid NOT IN ( SELECT student_id FROM score WHERE course_id = 2 )\n\n17、按平均成绩从低到高显示所有学生的“语文”、“数学”、“英语”三门的课程成绩，按如下形式显示： 学生ID,语文,数学,英语,有效课程数,有效平均分；\n    select sc.student_id,\n        (select num from score left join course on score.course_id = course.cid where course.cname = "生物" and score.student_id=sc.student_id) as sy,\n        (select num from score left join course on score.course_id = course.cid where course.cname = "物理" and score.student_id=sc.student_id) as wl,\n        (select num from score left join course on score.course_id = course.cid where course.cname = "体育" and score.student_id=sc.student_id) as ty,\n        count(sc.course_id),\n        avg(sc.num)\n    from score as sc\n    group by student_id desc\n\n18、查询各科成绩最高和最低的分：以如下形式显示：课程ID，最高分，最低分；\nselect  course_id,max(num),min(num),case when min(num) < 10 then 0 else min(num) END from score group by course_id ;\n\n19、按各科平均成绩从低到高和及格率的百分数从高到低顺序；\nSELECT\n\tcourse_id,\n\tavg( num ),\n\tsum( CASE WHEN num < 60 THEN 0 ELSE 1 END ) / sum( 1 ) AS jgl\nFROM\n\tscore\nGROUP BY\n\tcourse_id\nORDER BY\n\tavg( num ) ASC,\n\tjgl DESC;\n\n20、课程平均分从高到低显示（现实任课老师）；\nSELECT\n\ttname,\n\tcname,\n\tavg( if(isnull(score.num),0,score.num) )\nFROM\n\tteacher,\n\tcourse,\n\tscore\nWHERE\n\tteacher.tid = course.teacher_id\n\tAND score.course_id = course.cid\nGROUP BY\n\tcourse_id\nORDER BY\n\tavg( num ) DESC;\n\n21、查询各科成绩前三名的记录:(不考虑成绩并列情况)\nselect\n\ts1.student_id,\n\t(select num from score as s2 where s2.course_id=s1.course_id order by num desc limit 0,1) as num1,\n\t(select num from score as s2 where s2.course_id=s1.course_id order by num desc limit 1,1) as num2,\n\t(select num from score as s2 where s2.course_id=s1.course_id order by num desc limit 2,1) as num3\nfrom score as s1;\n\n22、查询每门课程被选修的学生数；\nselect count(course_id) from score group by course_id;\n\n23、查询出只选修了一门课程的全部学生的学号和姓名；\nselect student.sid,sname from score left join student on score.student_id=student.sid group by student_id having count(course_id)=1;\n\n24、查询男生、女生的人数；\nselect gender,count(1) from student group by gender;\n\n25、查询姓“张”的学生名单；\nselect * from student where sname like "张%";\n\n26、查询同名同姓学生名单，并统计同名人数；\nselect sname,count(1) from student group by sname;\n\n27、查询每门课程的平均成绩，结果按平均成绩升序排列，平均成绩相同时，按课程号降序排列；\nselect avg(if(isnull(num),0,num)) as cj from score group by course_id order by cj desc,course_id asc;\n\n28、查询平均成绩大于85的所有学生的学号、姓名和平均成绩；\nselect student.sid,sname,avg(if(isnull(num),0,num)) as cj from student left join score on student.sid=score.student_id group by student_id having cj>85;\n\n29、查询课程名称为“数学”，且分数低于60的学生姓名和分数；\nselect sname,num from student left join score on score.student_id=student.sid left join course on score.course_id=course.cid where cname like "物理" and num<60;\n\n30、查询课程编号为003且课程成绩在80分以上的学生的学号和姓名；\nselect student.sid,sname from score left join student on student.sid=score.student_id where course_id=3 and num>80;\n\n31、求选了课程的学生人数\nselect count(1) from (select count(student_id) from score group by student_id) as A;\n\n32、查询选修“杨艳”老师所授课程的学生中，成绩最高的学生姓名及其成绩；\nselect A.student_id,sname,num from student right join (\nselect student_id,num from score left join course on course.cid=score.course_id left join teacher on teacher.tid=course.teacher_id where tname like "张磊老师" order by num desc limit 0,1) as A\non A.student_id=student.sid;\n\n33、查询各个课程及相应的选修人数；\nselect cname,count(1) from score right join course on course.cid=score.course_id group by course_id;\n\n34、查询不同课程但成绩相同的学生的学号、课程号、学生成绩；\nselect DISTINCT s1.course_id,s2.course_id,s1.num,s2.num  from score as s1,score as s2 where s1.num=s2.num and s1.course_id!=s2.course_id;\n\n35、查询每门课程成绩最好的前两名；\nselect * from (\nselect\ncourse_id,\nstudent_id,\n\tnum,\n\t-- 因为遍历s1,要得到s1遍历的每门课程的id\n\t(select num from score as s2 where s2.course_id=s1.course_id order by num desc limit 0,1) as first_num,\n\t(select num from score as s2 where s2.course_id=s1.course_id order by num desc limit 1,1) as last_num\nfrom score as s1\n) as C\nwhere C.num>=C.last_num and C.num<=C.first_num;\n\n36、检索至少选修两门课程的学生学号；\nselect student_id from score group by student_id having count(1)>1;\n\n37、查询全部学生都选修的课程的课程号和课程名；\n    select course_id,count(1) from score group by course_id having count(1) = (select count(1) from student);\n\n38、查询没学过“叶平”老师讲授的任一门课程的学生姓名；\nselect sname from student where sid not in(select student_id from score where course_id in (select cid from course left join teacher on teacher.tid=course.teacher_id where tname like "刘海燕老师"));\n\n39、查询两门以上不及格课程的同学的学号及其平均成绩；\n    select student_id,count(1),avg(num) from score where num < 60 group by student_id having count(1) > 2\n\n40、检索“004”课程分数小于60，按分数降序排列的同学学号；\nselect student_id from score where course_id=4 and num<60 order by student_id asc;\n\n41、删除“002”同学的“001”课程的成绩；\n    delete from score where course_id = 1 and student_id = 2\n\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br"),n("span",{staticClass:"line-number"},[s._v("74")]),n("br"),n("span",{staticClass:"line-number"},[s._v("75")]),n("br"),n("span",{staticClass:"line-number"},[s._v("76")]),n("br"),n("span",{staticClass:"line-number"},[s._v("77")]),n("br"),n("span",{staticClass:"line-number"},[s._v("78")]),n("br"),n("span",{staticClass:"line-number"},[s._v("79")]),n("br"),n("span",{staticClass:"line-number"},[s._v("80")]),n("br"),n("span",{staticClass:"line-number"},[s._v("81")]),n("br"),n("span",{staticClass:"line-number"},[s._v("82")]),n("br"),n("span",{staticClass:"line-number"},[s._v("83")]),n("br"),n("span",{staticClass:"line-number"},[s._v("84")]),n("br"),n("span",{staticClass:"line-number"},[s._v("85")]),n("br"),n("span",{staticClass:"line-number"},[s._v("86")]),n("br"),n("span",{staticClass:"line-number"},[s._v("87")]),n("br"),n("span",{staticClass:"line-number"},[s._v("88")]),n("br"),n("span",{staticClass:"line-number"},[s._v("89")]),n("br"),n("span",{staticClass:"line-number"},[s._v("90")]),n("br"),n("span",{staticClass:"line-number"},[s._v("91")]),n("br"),n("span",{staticClass:"line-number"},[s._v("92")]),n("br"),n("span",{staticClass:"line-number"},[s._v("93")]),n("br"),n("span",{staticClass:"line-number"},[s._v("94")]),n("br"),n("span",{staticClass:"line-number"},[s._v("95")]),n("br"),n("span",{staticClass:"line-number"},[s._v("96")]),n("br"),n("span",{staticClass:"line-number"},[s._v("97")]),n("br"),n("span",{staticClass:"line-number"},[s._v("98")]),n("br"),n("span",{staticClass:"line-number"},[s._v("99")]),n("br"),n("span",{staticClass:"line-number"},[s._v("100")]),n("br"),n("span",{staticClass:"line-number"},[s._v("101")]),n("br"),n("span",{staticClass:"line-number"},[s._v("102")]),n("br"),n("span",{staticClass:"line-number"},[s._v("103")]),n("br"),n("span",{staticClass:"line-number"},[s._v("104")]),n("br"),n("span",{staticClass:"line-number"},[s._v("105")]),n("br"),n("span",{staticClass:"line-number"},[s._v("106")]),n("br"),n("span",{staticClass:"line-number"},[s._v("107")]),n("br"),n("span",{staticClass:"line-number"},[s._v("108")]),n("br"),n("span",{staticClass:"line-number"},[s._v("109")]),n("br"),n("span",{staticClass:"line-number"},[s._v("110")]),n("br"),n("span",{staticClass:"line-number"},[s._v("111")]),n("br"),n("span",{staticClass:"line-number"},[s._v("112")]),n("br"),n("span",{staticClass:"line-number"},[s._v("113")]),n("br"),n("span",{staticClass:"line-number"},[s._v("114")]),n("br"),n("span",{staticClass:"line-number"},[s._v("115")]),n("br"),n("span",{staticClass:"line-number"},[s._v("116")]),n("br"),n("span",{staticClass:"line-number"},[s._v("117")]),n("br"),n("span",{staticClass:"line-number"},[s._v("118")]),n("br"),n("span",{staticClass:"line-number"},[s._v("119")]),n("br"),n("span",{staticClass:"line-number"},[s._v("120")]),n("br"),n("span",{staticClass:"line-number"},[s._v("121")]),n("br"),n("span",{staticClass:"line-number"},[s._v("122")]),n("br"),n("span",{staticClass:"line-number"},[s._v("123")]),n("br"),n("span",{staticClass:"line-number"},[s._v("124")]),n("br"),n("span",{staticClass:"line-number"},[s._v("125")]),n("br"),n("span",{staticClass:"line-number"},[s._v("126")]),n("br"),n("span",{staticClass:"line-number"},[s._v("127")]),n("br"),n("span",{staticClass:"line-number"},[s._v("128")]),n("br"),n("span",{staticClass:"line-number"},[s._v("129")]),n("br"),n("span",{staticClass:"line-number"},[s._v("130")]),n("br"),n("span",{staticClass:"line-number"},[s._v("131")]),n("br"),n("span",{staticClass:"line-number"},[s._v("132")]),n("br"),n("span",{staticClass:"line-number"},[s._v("133")]),n("br"),n("span",{staticClass:"line-number"},[s._v("134")]),n("br"),n("span",{staticClass:"line-number"},[s._v("135")]),n("br"),n("span",{staticClass:"line-number"},[s._v("136")]),n("br"),n("span",{staticClass:"line-number"},[s._v("137")]),n("br"),n("span",{staticClass:"line-number"},[s._v("138")]),n("br"),n("span",{staticClass:"line-number"},[s._v("139")]),n("br"),n("span",{staticClass:"line-number"},[s._v("140")]),n("br"),n("span",{staticClass:"line-number"},[s._v("141")]),n("br"),n("span",{staticClass:"line-number"},[s._v("142")]),n("br"),n("span",{staticClass:"line-number"},[s._v("143")]),n("br"),n("span",{staticClass:"line-number"},[s._v("144")]),n("br"),n("span",{staticClass:"line-number"},[s._v("145")]),n("br"),n("span",{staticClass:"line-number"},[s._v("146")]),n("br"),n("span",{staticClass:"line-number"},[s._v("147")]),n("br"),n("span",{staticClass:"line-number"},[s._v("148")]),n("br"),n("span",{staticClass:"line-number"},[s._v("149")]),n("br"),n("span",{staticClass:"line-number"},[s._v("150")]),n("br"),n("span",{staticClass:"line-number"},[s._v("151")]),n("br"),n("span",{staticClass:"line-number"},[s._v("152")]),n("br"),n("span",{staticClass:"line-number"},[s._v("153")]),n("br"),n("span",{staticClass:"line-number"},[s._v("154")]),n("br"),n("span",{staticClass:"line-number"},[s._v("155")]),n("br"),n("span",{staticClass:"line-number"},[s._v("156")]),n("br"),n("span",{staticClass:"line-number"},[s._v("157")]),n("br"),n("span",{staticClass:"line-number"},[s._v("158")]),n("br"),n("span",{staticClass:"line-number"},[s._v("159")]),n("br"),n("span",{staticClass:"line-number"},[s._v("160")]),n("br"),n("span",{staticClass:"line-number"},[s._v("161")]),n("br"),n("span",{staticClass:"line-number"},[s._v("162")]),n("br"),n("span",{staticClass:"line-number"},[s._v("163")]),n("br"),n("span",{staticClass:"line-number"},[s._v("164")]),n("br"),n("span",{staticClass:"line-number"},[s._v("165")]),n("br"),n("span",{staticClass:"line-number"},[s._v("166")]),n("br"),n("span",{staticClass:"line-number"},[s._v("167")]),n("br"),n("span",{staticClass:"line-number"},[s._v("168")]),n("br"),n("span",{staticClass:"line-number"},[s._v("169")]),n("br"),n("span",{staticClass:"line-number"},[s._v("170")]),n("br"),n("span",{staticClass:"line-number"},[s._v("171")]),n("br"),n("span",{staticClass:"line-number"},[s._v("172")]),n("br"),n("span",{staticClass:"line-number"},[s._v("173")]),n("br"),n("span",{staticClass:"line-number"},[s._v("174")]),n("br"),n("span",{staticClass:"line-number"},[s._v("175")]),n("br"),n("span",{staticClass:"line-number"},[s._v("176")]),n("br"),n("span",{staticClass:"line-number"},[s._v("177")]),n("br"),n("span",{staticClass:"line-number"},[s._v("178")]),n("br"),n("span",{staticClass:"line-number"},[s._v("179")]),n("br"),n("span",{staticClass:"line-number"},[s._v("180")]),n("br"),n("span",{staticClass:"line-number"},[s._v("181")]),n("br"),n("span",{staticClass:"line-number"},[s._v("182")]),n("br"),n("span",{staticClass:"line-number"},[s._v("183")]),n("br"),n("span",{staticClass:"line-number"},[s._v("184")]),n("br"),n("span",{staticClass:"line-number"},[s._v("185")]),n("br"),n("span",{staticClass:"line-number"},[s._v("186")]),n("br"),n("span",{staticClass:"line-number"},[s._v("187")]),n("br"),n("span",{staticClass:"line-number"},[s._v("188")]),n("br"),n("span",{staticClass:"line-number"},[s._v("189")]),n("br"),n("span",{staticClass:"line-number"},[s._v("190")]),n("br"),n("span",{staticClass:"line-number"},[s._v("191")]),n("br"),n("span",{staticClass:"line-number"},[s._v("192")]),n("br"),n("span",{staticClass:"line-number"},[s._v("193")]),n("br"),n("span",{staticClass:"line-number"},[s._v("194")]),n("br"),n("span",{staticClass:"line-number"},[s._v("195")]),n("br"),n("span",{staticClass:"line-number"},[s._v("196")]),n("br"),n("span",{staticClass:"line-number"},[s._v("197")]),n("br"),n("span",{staticClass:"line-number"},[s._v("198")]),n("br"),n("span",{staticClass:"line-number"},[s._v("199")]),n("br"),n("span",{staticClass:"line-number"},[s._v("200")]),n("br"),n("span",{staticClass:"line-number"},[s._v("201")]),n("br"),n("span",{staticClass:"line-number"},[s._v("202")]),n("br"),n("span",{staticClass:"line-number"},[s._v("203")]),n("br"),n("span",{staticClass:"line-number"},[s._v("204")]),n("br"),n("span",{staticClass:"line-number"},[s._v("205")]),n("br"),n("span",{staticClass:"line-number"},[s._v("206")]),n("br"),n("span",{staticClass:"line-number"},[s._v("207")]),n("br"),n("span",{staticClass:"line-number"},[s._v("208")]),n("br"),n("span",{staticClass:"line-number"},[s._v("209")]),n("br"),n("span",{staticClass:"line-number"},[s._v("210")]),n("br"),n("span",{staticClass:"line-number"},[s._v("211")]),n("br"),n("span",{staticClass:"line-number"},[s._v("212")]),n("br"),n("span",{staticClass:"line-number"},[s._v("213")]),n("br"),n("span",{staticClass:"line-number"},[s._v("214")]),n("br"),n("span",{staticClass:"line-number"},[s._v("215")]),n("br"),n("span",{staticClass:"line-number"},[s._v("216")]),n("br"),n("span",{staticClass:"line-number"},[s._v("217")]),n("br"),n("span",{staticClass:"line-number"},[s._v("218")]),n("br"),n("span",{staticClass:"line-number"},[s._v("219")]),n("br"),n("span",{staticClass:"line-number"},[s._v("220")]),n("br"),n("span",{staticClass:"line-number"},[s._v("221")]),n("br"),n("span",{staticClass:"line-number"},[s._v("222")]),n("br"),n("span",{staticClass:"line-number"},[s._v("223")]),n("br"),n("span",{staticClass:"line-number"},[s._v("224")]),n("br"),n("span",{staticClass:"line-number"},[s._v("225")]),n("br"),n("span",{staticClass:"line-number"},[s._v("226")]),n("br"),n("span",{staticClass:"line-number"},[s._v("227")]),n("br"),n("span",{staticClass:"line-number"},[s._v("228")]),n("br"),n("span",{staticClass:"line-number"},[s._v("229")]),n("br"),n("span",{staticClass:"line-number"},[s._v("230")]),n("br"),n("span",{staticClass:"line-number"},[s._v("231")]),n("br"),n("span",{staticClass:"line-number"},[s._v("232")]),n("br"),n("span",{staticClass:"line-number"},[s._v("233")]),n("br"),n("span",{staticClass:"line-number"},[s._v("234")]),n("br"),n("span",{staticClass:"line-number"},[s._v("235")]),n("br"),n("span",{staticClass:"line-number"},[s._v("236")]),n("br"),n("span",{staticClass:"line-number"},[s._v("237")]),n("br"),n("span",{staticClass:"line-number"},[s._v("238")]),n("br"),n("span",{staticClass:"line-number"},[s._v("239")]),n("br"),n("span",{staticClass:"line-number"},[s._v("240")]),n("br"),n("span",{staticClass:"line-number"},[s._v("241")]),n("br"),n("span",{staticClass:"line-number"},[s._v("242")]),n("br"),n("span",{staticClass:"line-number"},[s._v("243")]),n("br"),n("span",{staticClass:"line-number"},[s._v("244")]),n("br"),n("span",{staticClass:"line-number"},[s._v("245")]),n("br"),n("span",{staticClass:"line-number"},[s._v("246")]),n("br"),n("span",{staticClass:"line-number"},[s._v("247")]),n("br"),n("span",{staticClass:"line-number"},[s._v("248")]),n("br"),n("span",{staticClass:"line-number"},[s._v("249")]),n("br"),n("span",{staticClass:"line-number"},[s._v("250")]),n("br"),n("span",{staticClass:"line-number"},[s._v("251")]),n("br"),n("span",{staticClass:"line-number"},[s._v("252")]),n("br"),n("span",{staticClass:"line-number"},[s._v("253")]),n("br"),n("span",{staticClass:"line-number"},[s._v("254")]),n("br"),n("span",{staticClass:"line-number"},[s._v("255")]),n("br"),n("span",{staticClass:"line-number"},[s._v("256")]),n("br"),n("span",{staticClass:"line-number"},[s._v("257")]),n("br"),n("span",{staticClass:"line-number"},[s._v("258")]),n("br"),n("span",{staticClass:"line-number"},[s._v("259")]),n("br"),n("span",{staticClass:"line-number"},[s._v("260")]),n("br"),n("span",{staticClass:"line-number"},[s._v("261")]),n("br"),n("span",{staticClass:"line-number"},[s._v("262")]),n("br"),n("span",{staticClass:"line-number"},[s._v("263")]),n("br"),n("span",{staticClass:"line-number"},[s._v("264")]),n("br"),n("span",{staticClass:"line-number"},[s._v("265")]),n("br"),n("span",{staticClass:"line-number"},[s._v("266")]),n("br"),n("span",{staticClass:"line-number"},[s._v("267")]),n("br"),n("span",{staticClass:"line-number"},[s._v("268")]),n("br"),n("span",{staticClass:"line-number"},[s._v("269")]),n("br"),n("span",{staticClass:"line-number"},[s._v("270")]),n("br"),n("span",{staticClass:"line-number"},[s._v("271")]),n("br"),n("span",{staticClass:"line-number"},[s._v("272")]),n("br"),n("span",{staticClass:"line-number"},[s._v("273")]),n("br"),n("span",{staticClass:"line-number"},[s._v("274")]),n("br"),n("span",{staticClass:"line-number"},[s._v("275")]),n("br"),n("span",{staticClass:"line-number"},[s._v("276")]),n("br"),n("span",{staticClass:"line-number"},[s._v("277")]),n("br"),n("span",{staticClass:"line-number"},[s._v("278")]),n("br"),n("span",{staticClass:"line-number"},[s._v("279")]),n("br"),n("span",{staticClass:"line-number"},[s._v("280")]),n("br"),n("span",{staticClass:"line-number"},[s._v("281")]),n("br"),n("span",{staticClass:"line-number"},[s._v("282")]),n("br"),n("span",{staticClass:"line-number"},[s._v("283")]),n("br"),n("span",{staticClass:"line-number"},[s._v("284")]),n("br"),n("span",{staticClass:"line-number"},[s._v("285")]),n("br"),n("span",{staticClass:"line-number"},[s._v("286")]),n("br"),n("span",{staticClass:"line-number"},[s._v("287")]),n("br"),n("span",{staticClass:"line-number"},[s._v("288")]),n("br"),n("span",{staticClass:"line-number"},[s._v("289")]),n("br"),n("span",{staticClass:"line-number"},[s._v("290")]),n("br"),n("span",{staticClass:"line-number"},[s._v("291")]),n("br"),n("span",{staticClass:"line-number"},[s._v("292")]),n("br"),n("span",{staticClass:"line-number"},[s._v("293")]),n("br"),n("span",{staticClass:"line-number"},[s._v("294")]),n("br"),n("span",{staticClass:"line-number"},[s._v("295")]),n("br"),n("span",{staticClass:"line-number"},[s._v("296")]),n("br"),n("span",{staticClass:"line-number"},[s._v("297")]),n("br"),n("span",{staticClass:"line-number"},[s._v("298")]),n("br"),n("span",{staticClass:"line-number"},[s._v("299")]),n("br"),n("span",{staticClass:"line-number"},[s._v("300")]),n("br"),n("span",{staticClass:"line-number"},[s._v("301")]),n("br"),n("span",{staticClass:"line-number"},[s._v("302")]),n("br"),n("span",{staticClass:"line-number"},[s._v("303")]),n("br"),n("span",{staticClass:"line-number"},[s._v("304")]),n("br"),n("span",{staticClass:"line-number"},[s._v("305")]),n("br"),n("span",{staticClass:"line-number"},[s._v("306")]),n("br"),n("span",{staticClass:"line-number"},[s._v("307")]),n("br"),n("span",{staticClass:"line-number"},[s._v("308")]),n("br"),n("span",{staticClass:"line-number"},[s._v("309")]),n("br"),n("span",{staticClass:"line-number"},[s._v("310")]),n("br"),n("span",{staticClass:"line-number"},[s._v("311")]),n("br"),n("span",{staticClass:"line-number"},[s._v("312")]),n("br"),n("span",{staticClass:"line-number"},[s._v("313")]),n("br"),n("span",{staticClass:"line-number"},[s._v("314")]),n("br"),n("span",{staticClass:"line-number"},[s._v("315")]),n("br"),n("span",{staticClass:"line-number"},[s._v("316")]),n("br"),n("span",{staticClass:"line-number"},[s._v("317")]),n("br"),n("span",{staticClass:"line-number"},[s._v("318")]),n("br"),n("span",{staticClass:"line-number"},[s._v("319")]),n("br"),n("span",{staticClass:"line-number"},[s._v("320")]),n("br"),n("span",{staticClass:"line-number"},[s._v("321")]),n("br"),n("span",{staticClass:"line-number"},[s._v("322")]),n("br"),n("span",{staticClass:"line-number"},[s._v("323")]),n("br"),n("span",{staticClass:"line-number"},[s._v("324")]),n("br"),n("span",{staticClass:"line-number"},[s._v("325")]),n("br"),n("span",{staticClass:"line-number"},[s._v("326")]),n("br"),n("span",{staticClass:"line-number"},[s._v("327")]),n("br"),n("span",{staticClass:"line-number"},[s._v("328")]),n("br"),n("span",{staticClass:"line-number"},[s._v("329")]),n("br"),n("span",{staticClass:"line-number"},[s._v("330")]),n("br"),n("span",{staticClass:"line-number"},[s._v("331")]),n("br"),n("span",{staticClass:"line-number"},[s._v("332")]),n("br"),n("span",{staticClass:"line-number"},[s._v("333")]),n("br"),n("span",{staticClass:"line-number"},[s._v("334")]),n("br"),n("span",{staticClass:"line-number"},[s._v("335")]),n("br"),n("span",{staticClass:"line-number"},[s._v("336")]),n("br"),n("span",{staticClass:"line-number"},[s._v("337")]),n("br"),n("span",{staticClass:"line-number"},[s._v("338")]),n("br"),n("span",{staticClass:"line-number"},[s._v("339")]),n("br"),n("span",{staticClass:"line-number"},[s._v("340")]),n("br"),n("span",{staticClass:"line-number"},[s._v("341")]),n("br"),n("span",{staticClass:"line-number"},[s._v("342")]),n("br"),n("span",{staticClass:"line-number"},[s._v("343")]),n("br"),n("span",{staticClass:"line-number"},[s._v("344")]),n("br"),n("span",{staticClass:"line-number"},[s._v("345")]),n("br"),n("span",{staticClass:"line-number"},[s._v("346")]),n("br"),n("span",{staticClass:"line-number"},[s._v("347")]),n("br"),n("span",{staticClass:"line-number"},[s._v("348")]),n("br"),n("span",{staticClass:"line-number"},[s._v("349")]),n("br"),n("span",{staticClass:"line-number"},[s._v("350")]),n("br"),n("span",{staticClass:"line-number"},[s._v("351")]),n("br"),n("span",{staticClass:"line-number"},[s._v("352")]),n("br"),n("span",{staticClass:"line-number"},[s._v("353")]),n("br"),n("span",{staticClass:"line-number"},[s._v("354")]),n("br"),n("span",{staticClass:"line-number"},[s._v("355")]),n("br"),n("span",{staticClass:"line-number"},[s._v("356")]),n("br"),n("span",{staticClass:"line-number"},[s._v("357")]),n("br"),n("span",{staticClass:"line-number"},[s._v("358")]),n("br"),n("span",{staticClass:"line-number"},[s._v("359")]),n("br"),n("span",{staticClass:"line-number"},[s._v("360")]),n("br"),n("span",{staticClass:"line-number"},[s._v("361")]),n("br"),n("span",{staticClass:"line-number"},[s._v("362")]),n("br"),n("span",{staticClass:"line-number"},[s._v("363")]),n("br"),n("span",{staticClass:"line-number"},[s._v("364")]),n("br"),n("span",{staticClass:"line-number"},[s._v("365")]),n("br"),n("span",{staticClass:"line-number"},[s._v("366")]),n("br"),n("span",{staticClass:"line-number"},[s._v("367")]),n("br"),n("span",{staticClass:"line-number"},[s._v("368")]),n("br"),n("span",{staticClass:"line-number"},[s._v("369")]),n("br"),n("span",{staticClass:"line-number"},[s._v("370")]),n("br"),n("span",{staticClass:"line-number"},[s._v("371")]),n("br"),n("span",{staticClass:"line-number"},[s._v("372")]),n("br"),n("span",{staticClass:"line-number"},[s._v("373")]),n("br"),n("span",{staticClass:"line-number"},[s._v("374")]),n("br"),n("span",{staticClass:"line-number"},[s._v("375")]),n("br"),n("span",{staticClass:"line-number"},[s._v("376")]),n("br"),n("span",{staticClass:"line-number"},[s._v("377")]),n("br"),n("span",{staticClass:"line-number"},[s._v("378")]),n("br"),n("span",{staticClass:"line-number"},[s._v("379")]),n("br"),n("span",{staticClass:"line-number"},[s._v("380")]),n("br"),n("span",{staticClass:"line-number"},[s._v("381")]),n("br"),n("span",{staticClass:"line-number"},[s._v("382")]),n("br"),n("span",{staticClass:"line-number"},[s._v("383")]),n("br"),n("span",{staticClass:"line-number"},[s._v("384")]),n("br"),n("span",{staticClass:"line-number"},[s._v("385")]),n("br")])]),n("h2",{attrs:{id:"五、视图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#五、视图"}},[s._v("#")]),s._v(" "),n("strong",[s._v("五、视图")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("更多资料：http://c.biancheng.net/view/2584.html\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("视图是一个虚拟表（非真实存在），其本质是【根据SQL语句获取动态的数据集，并为其命名】，用户使用时只需使用【名称】即可获取结果集，并可以将其当作表来使用。")]),s._v(" "),n("p",[n("strong",[s._v("其实就是把sql语句放到一个函数中，用的时候直接调用即可")])]),s._v(" "),n("p",[n("strong",[s._v("语法格式如下：")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("CREATE VIEW <视图名> AS <SELECT语句>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_1、创建视图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建视图"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、创建视图")])]),s._v(" "),n("h4",{attrs:{id:"_1-1-单表创建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-单表创建"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.1 单表创建")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("--格式：CREATE VIEW 视图名称 AS  SQL语句\n\ncreate view v1 as select * from student where sid > 10;\n\n-- 选择创建的字段\ncreate view v2 (sid,sname) as  select sid,sname from student where sid > 10;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h4",{attrs:{id:"_1-2-多表创建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-多表创建"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.2 多表创建")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_2、删除视图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、删除视图"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、删除视图")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("--格式：DROP VIEW 视图名称\n\nDROP VIEW v1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_3、修改视图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、修改视图"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3、修改视图")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("-- 格式：ALTER VIEW 视图名称 AS SQL语句\n\nalter view v1 as select * from student where sid > 15;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_4、使用视图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、使用视图"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4、使用视图")])]),s._v(" "),n("p",[s._v("使用视图时，将其当作表进行操作即可，由于视图是虚拟表，所以无法使用其对真实表进行创建、更新和删除操作，仅能做查询用。")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select * from v1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"六、触发器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#六、触发器"}},[s._v("#")]),s._v(" "),n("strong",[s._v("六、触发器")])]),s._v(" "),n("p",[s._v("更多资料："),n("a",{attrs:{href:"http://c.biancheng.net/view/7243.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://c.biancheng.net/view/7243.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("对某个表进行【增/删/改】操作的前后如果希望触发某个特定的行为时，可以使用触发器，触发器用于定制用户对表的行进行【增/删/改】前后的行为。")]),s._v(" "),n("h3",{attrs:{id:"_1、创建基本语法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建基本语法"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、创建基本语法")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("# 插入前\nCREATE TRIGGER 触发器名称 BEFORE INSERT ON 表名 FOR EACH ROW\nBEGIN\n    ...\nEND\n\n# 插入后\nCREATE TRIGGER 触发器名称 AFTER INSERT ON 表名 FOR EACH ROW\nBEGIN\n    ...\nEND\n\n# 删除前\nCREATE TRIGGER 触发器名称 BEFORE DELETE ON 表名 FOR EACH ROW\nBEGIN\n    ...\nEND\n\n# 删除后\nCREATE TRIGGER 触发器名称 AFTER DELETE ON 表名 FOR EACH ROW\nBEGIN\n    ...\nEND\n\n# 更新前\nCREATE TRIGGER 触发器名称 BEFORE UPDATE ON 表名 FOR EACH ROW\nBEGIN\n    ...\nEND\n\n# 更新后\nCREATE TRIGGER 触发器名称 AFTER UPDATE ON 表名 FOR EACH ROW\nBEGIN\n    ...\nEND\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('-- 创建触发器\ndelimiter // -- 修改结束符号为//，因为里面语句有;号。后面的end就不会执行，只有修改结束符号然后在改回来\nCREATE TRIGGER cfq2 BEFORE INSERT ON student FOR EACH ROW\nBEGIN\n\tinsert into teacher(tname) values(NEW.SNAME); -- NEW新数据 OLD老数据\nEND //\n\ndelimiter ;\n\n-- 添加student数据就会触发触发器，然后在teacher表添加之前添加数据\ninsert into student(gender,class_id,sname) values("男",1,"aabb");\n\n-- NEW.SNAME获取新数据行的sname\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[n("strong",[s._v("特别的：NEW表示即将插入的数据行，OLD表示即将删除的数据行。delimiter //：修改语句结束符号为//")])]),s._v(" "),n("h3",{attrs:{id:"_2、删除触发器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、删除触发器"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、删除触发器")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("DROP TRIGGER 触发器名称;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_3、使用触发器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、使用触发器"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3、使用触发器")])]),s._v(" "),n("p",[s._v("触发器无法由用户直接调用，而知由于对表的【增/删/改】操作被动引发的。")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("insert into tb1(num) values(666)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"七、函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#七、函数"}},[s._v("#")]),s._v(" "),n("strong",[s._v("七、函数")])]),s._v(" "),n("h3",{attrs:{id:"_1、内置函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、内置函数"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、内置函数")])]),s._v(" "),n("p",[s._v("MySQL中提供了许多内置函数，例如：")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/wupeiqi/articles/5713323.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/wupeiqi/articles/5713323.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/functions.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/doc/refman/5.7/en/functions.html"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("sum,\nlower\nupper\n..\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h3",{attrs:{id:"_2、自定义函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、自定义函数"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、自定义函数")])]),s._v(" "),n("h4",{attrs:{id:"_2-1-创建自定义函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-创建自定义函数"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.1 创建自定义函数")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("delimiter \\\\\n-- 定义函数传递参数\ncreate function f1(\n    i1 int,\n    i2 int)\nreturns int\nBEGIN\n    declare num int;  -- 定义变量 int num\n    set num = i1 + i2;\n    return(num);\nEND \\\\\ndelimiter ;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h4",{attrs:{id:"_2-2-删除函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-删除函数"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.2 删除函数")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("drop function 函数名;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"_2-3-执行函数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-执行函数"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.3 执行函数")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select f1(11,2) ,name from tb2;\n\nselect f1(11,2);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h2",{attrs:{id:"八、存储过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#八、存储过程"}},[s._v("#")]),s._v(" "),n("strong",[s._v("八、存储过程")])]),s._v(" "),n("p",[s._v("详细资料："),n("a",{attrs:{href:"http://c.biancheng.net/mysql/85/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://c.biancheng.net/mysql/85/"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/wupeiqi/articles/5713323.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/wupeiqi/articles/5713323.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("存储过程是一个SQL语句集合，当主动去调用存储过程时，其中内部的SQL语句会按照逻辑执行。（就是像python函数一样,里面可以放很多条sql语句）")]),s._v(" "),n("h3",{attrs:{id:"_1、创建存储过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建存储过程"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、创建存储过程")])]),s._v(" "),n("h4",{attrs:{id:"_1-1-无参数存储过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-无参数存储过程"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.1 无参数存储过程")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("-- 创建p1\ndelimiter //\ncreate procedure p1()\nbegin\n\tselect * from score;\n\tselect * from teacher;\nend //\ndelimiter ;\n\n-- 调用创建的存储过程\ncall p1()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("在python中调用")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("import pymysql\n\nconn = pymysql.connect(host='localhost', port=3306, user='root', passwd='mysql', db='db1')\ncursor = conn.cursor()\n\neffect_row = cursor.callproc(\"p1\")  # 存储过程名称\nconn.commit()\ndata = cursor.fetchall()  # 查看得到的所有结果\nprint(data,1)\ncursor.close()\nconn.close()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("h4",{attrs:{id:"_1-2-接收参数存储过程in-out-inout"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-接收参数存储过程in-out-inout"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.2 接收参数存储过程in,out,inout")])]),s._v(" "),n("p",[s._v("对于存储过程，可以接收参数，其参数有三类：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("in 仅用于传入参数用")])]),s._v(" "),n("li",[n("p",[s._v("out 仅用于返回值用")])]),s._v(" "),n("li",[n("p",[s._v("inout 既可以传入又可以当作返回值")])])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("-- 创建p3成绩大于i3并小于i1从存储过程\n\ndelimiter //\ncreate procedure p3(\n\tin i1 int,  -- 仅用于传入参数用\n\tout i2 int,  -- 仅用于返回值用存储到session中\n\tinout i3 int  -- 既可以传入又可以当作返回值存储到session中\n)\nbegin\n\tset i2 = 123321; -- 可以在里面赋值，这个要在里面赋值才可以在python拿到\n\t-- set i3 = 100;\n\tselect * from score where num>i3 and num < i1;\nend //\ndelimiter ;\n\n-- 调用\nset @v1 = 20;\nset @v2 = 0;\ncall p6(3,@v1,@v2)\n\n-- 查看创建的全局变量\nselect @v1;\nselect @v2;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[s._v("在python中使用")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("import pymysql\n\nconn = pymysql.connect(host='localhost', port=3306, user='root', passwd='mysql', db='db1')\ncursor = conn.cursor()\n\neffect_row = cursor.callproc(\"p7\", (3, 20, 0))  # 存储过程名称\nconn.commit()\ndata = cursor.fetchall()  # 查看得到的所有结果\nprint(\"获取查询得到的结果：\", data)\ncursor.execute(\"select @_p7_0,@_p7_1,@_p7_2\")\ndata2 = cursor.fetchall()\nprint(\"获取传递存储过程的参数：\", data2)\ncursor.close()\nconn.close()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h4",{attrs:{id:"_1-3-事务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-事务"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.3 事务")])]),s._v(" "),n("p",[s._v("要在MySQL存储过程中执行ROLLBACK，我们必须在存储过程中声明退出处理程序。在MySQL存储过程中有两种类型的处理程序。")]),s._v(" "),n("ol",[n("li",[n("p",[n("strong",[s._v("sqlexception")])])]),s._v(" "),n("li",[n("p",[n("strong",[s._v("sqlwarning")])])])]),s._v(" "),n("p",[s._v("SQLException都将被执行时，有查询执行和过程中发生任何错误的SQLWarning将执行时的任何警告在MySQL存储过程发生。我们来看看如何在“存储过程”中使用这些块。")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("-- 创建事物\n\ndelimiter \\\\\ncreate PROCEDURE p11(\n\t\tOUT p_return_code tinyint -- out只返回\n)\nBEGIN\n\tDECLARE exit handler for sqlexception -- 发生错误了执行下面的，返回1\n\tBEGIN\n\t\t-- ERROR\n\t\tset p_return_code = 1;\n\t\trollback;\n\tEND;\n\n\tDECLARE exit handler for sqlwarning -- 警告，返回2\n\tBEGIN\n\t\t-- WARNING\n\t\tset p_return_code = 2;\n\t\trollback;\n\tEND;\n\n\tSTART TRANSACTION; -- 开始执行事务\n\t\tDELETE from tb1;\n\t\tinsert into tb2(name)values('seven');\n\tCOMMIT;\n\n\t-- SUCCESS\n\tset p_return_code = 0; -- 执行成功，返回0\n\tEND\\\\\ndelimiter ;\n\n-- 执行\nset @v1 = 0;\nCALL p11(@v1);\n\n-- 得到out v1的结果\nselect @v1;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br")])]),n("p",[s._v("在python中使用")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("import pymysql\n\nconn = pymysql.connect(host='localhost', port=3306, user='root', passwd='mysql', db='db1')\ncursor = conn.cursor()\n\neffect_row = cursor.callproc(\"p11\", (9,))  # 存储过程名称\nconn.commit()\ndata = cursor.fetchall()  # 查看得到的所有结果\nprint(\"获取查询得到的结果：\", data)\ncursor.execute(\"select @_p11_0\")\ndata2 = cursor.fetchall()\nprint(\"获取传递存储过程的参数：\", data2)\ncursor.close()\nconn.close()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])]),n("h4",{attrs:{id:"_1-4-游标"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-游标"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.4 游标")])]),s._v(" "),n("p",[s._v("详细资料："),n("a",{attrs:{href:"http://c.biancheng.net/view/7823.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://c.biancheng.net/view/7823.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("游标按我的理解就是用在sql编程中对查询结果集的解析，类比jdbc中的resultset对象。FETCH 一行游标指针就往下面移动一行，直到所有行被遍历完成。")]),s._v(" "),n("p",[s._v("游标的使用分为4步：\n1、定义游标，指定游标名和查询sql语句\n2、打开游标\n3、fetch 获取数据，赋值给变量\n4、关闭游标")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("-- 创建游标\n\ndelimiter //\ncreate procedure p22()\nbegin\n\tdeclare ssid int; -- 自定义变量1\n\tdeclare ssname varchar(50); -- 自定义变量2\n\tDECLARE done INT DEFAULT FALSE;  -- done = false\n\n\n\tDECLARE my_cursor CURSOR FOR select sid,sname from student;  -- 创建游标\n\tDECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;  -- 没有数据的话变成True\n\n\topen my_cursor;  -- 打卡创建的游标\n\t\t\txxoo: LOOP  -- 进行循环\n\t\t\t\t\tfetch my_cursor into ssid,ssname; -- fetch循环拿到sid,sname并赋值给ssid,ssname\n\t\t\t\t\tif done then -- 等于True的话就离开loop循环\n\t\t\t\t\t\t\tleave xxoo;\n\t\t\t\t\tEND IF;  -- 插入数据\n\t\t\t\t\tinsert into teacher(tname) values(ssname);\n\t\t\tend loop xxoo;\n\tclose my_cursor;  -- 关闭游标\nend  //\ndelimiter ;\n\n-- 执行游标\nCALL p23();\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h4",{attrs:{id:"_1-5-动态执行sql-防止sql注入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-动态执行sql-防止sql注入"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.5 动态执行sql(防止sql注入)")])]),s._v(" "),n("p",[s._v("我们可以通过传递不同的参数得到我们想要的值，还可以防止sql注入")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("-- 创建\n\ndelimiter \\\\\nCREATE PROCEDURE p29 (\n\t\tin nid int\n)\nBEGIN\n\t\tPREPARE prod FROM 'select * from score where num > ?';\t -- 1.预检测某个东西 校验sql语句的合法性\n\t\tEXECUTE prod USING @nid;  -- SQL = 格式化 prod + @nid\n\t\tDEALLOCATE prepare prod;  -- 执行SQL语句\nEND\\\\\ndelimiter ;\n\n-- 执行\ncall p29(5);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"_2、删除存储过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、删除存储过程"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、删除存储过程")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("drop procedure proc_name;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_3、执行存储过程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、执行存储过程"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3、执行存储过程")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("-- 无参数\ncall proc_name()\n\n-- 有参数，全in\ncall proc_name(1,2)\n\n-- 有参数，有in，out，inout\nset @t1=0;\nset @t2=3;\ncall proc_name(1,2,@t1,@t2)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("h2",{attrs:{id:"九、索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#九、索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("九、索引")])]),s._v(" "),n("p",[s._v("索引补充："),n("a",{attrs:{href:"https://www.cnblogs.com/wupeiqi/articles/5716963.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/wupeiqi/articles/5716963.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("索引，是数据库中专门用于帮助用户快速查询数据的一种数据结构。类似于字典中的目录，查找字典内容时可以根据目录查找到数据的存放位置，然后直接获取即可。")]),s._v(" "),n("p",[n("strong",[s._v("作用：")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("约束")])]),s._v(" "),n("li",[n("p",[s._v("加速查找")])])]),s._v(" "),n("p",[n("strong",[s._v("MySQL中常见索引有：")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("普通索引：加速查找")])]),s._v(" "),n("li",[n("p",[s._v("主键索引：加速查找 + 不能为空 + 不能重复")])]),s._v(" "),n("li",[n("p",[s._v("唯一索引：加速查找 + 不能重复")])]),s._v(" "),n("li",[n("p",[s._v("联合索引（多列，上面的都是单个字段）：")])]),s._v(" "),n("li",[n("p",[s._v("联合主键索引")])]),s._v(" "),n("li",[n("p",[s._v("联合唯一索引")])]),s._v(" "),n("li",[n("p",[s._v("联合普通索引")])]),s._v(" "),n("li",[n("p",[s._v("名词：")])]),s._v(" "),n("li",[n("p",[s._v("覆盖索引：在索引文件中直接获取数据")])])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("select id from student where id=3;  -- id已经建立索引\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("索引合并：把多个单列索引合并使用")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('select * from student where sname="abc" and email="c";  -- sname,email已经建立索引\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("有无索引的区别：")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("无索引：从前到后依次查找")])]),s._v(" "),n("li",[n("p",[s._v("有索引：")])])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("id\t\t\t创建额外文件（某种格式存储）\nname\t\t创建额外文件（某种格式存储）\nemail\t\t创建额外文件（某种格式存储）\nname email  创建额外文件（某种格式存储）\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[n("strong",[s._v("索引种类（某种格式存储）：")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("hash索引")])]),s._v(" "),n("li",[n("p",[s._v("单值快")])]),s._v(" "),n("li",[n("p",[s._v("范围")])]),s._v(" "),n("li",[n("p",[s._v("btree索引")])]),s._v(" "),n("li",[n("p",[s._v("用了二叉树")])]),s._v(" "),n("li",[n("p",[s._v("连续的时候很快")])])]),s._v(" "),n("p",[n("strong",[s._v("建立索引：")])]),s._v(" "),n("ul",[n("li",[n("p",[s._v("a. 额外的文件保存特殊的数据结构")])]),s._v(" "),n("li",[n("p",[s._v("b. 查询快；插入更新删除慢")])]),s._v(" "),n("li",[n("p",[s._v("命中索引")])])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('select * from student where sname = "aabbcc";  -- 快\n\nselect * from student where sname like "aabbcc";  -- 慢，因为不支持like\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h3",{attrs:{id:"_1、普通索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、普通索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、普通索引")])]),s._v(" "),n("p",[s._v("普通索引仅有一个功能：加速查询")]),s._v(" "),n("h4",{attrs:{id:"_1-1-创建表-索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-创建表-索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.1 创建表+索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create table in1(\n    nid int not null auto_increment primary key,\n    name varchar(32) not null,\n    email varchar(64) not null,\n    extra text,\n    index ix_name (name)  -- 索引名称\n)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"_1-2-创建索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-创建索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.2 创建索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create index 索引名称 on 表名(字段名);\n\ncreate index index_name on table_name(column_name);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h4",{attrs:{id:"_1-3-删除索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-删除索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.3 删除索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("drop index 创建索引名称 on 表名;\n\ndrop index index_sname on student;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h4",{attrs:{id:"_1-4-查看索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-查看索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.4 查看索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("show index from 表名;\n\nshow index from student;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("strong",[s._v("注意：对于创建索引时如果是BLOB 和 TEXT 类型，必须指定length。")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create index ix_extra on in1(extra(32));\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_2、唯一索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、唯一索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、唯一索引")])]),s._v(" "),n("p",[s._v("唯一索引有两个功能：加速查询 和 唯一约束（可含null）")]),s._v(" "),n("h4",{attrs:{id:"_2-1-创建表-索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-创建表-索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.1 创建表+索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create table in1(\n    nid int not null auto_increment primary key,\n    name varchar(32) not null,\n    email varchar(64) not null,\n    extra text,\n    unique ix_name (name)\n)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"_2-2-创建索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-创建索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.2 创建索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create unique index 索引名 on 表名(列名)\n\ncreate unique index index_sname on student(sid); -- 创建的时候字段中的值不能重复\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h4",{attrs:{id:"_2-3-删除索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-删除索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.3 删除索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("drop unique index 索引名 on 表名\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"_3、主键索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、主键索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3、主键索引")])]),s._v(" "),n("p",[s._v("主键有两个功能：加速查询 和 唯一约束（不可含null）")]),s._v(" "),n("h4",{attrs:{id:"_3-1-创建表-索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-创建表-索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3.1 创建表+索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create table in1(\n    nid int not null auto_increment primary key,\n    name varchar(32) not null,\n    email varchar(64) not null,\n    extra text,\n    index ix_name (name)\n)\n\nOR\n\ncreate table in1(\n    nid int not null auto_increment,\n    name varchar(32) not null,\n    email varchar(64) not null,\n    extra text,\n    primary key(ni1),\n    index ix_name (name)\n)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h4",{attrs:{id:"_3-2-创建索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-创建索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3.2 创建索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("alter table 表名 add primary key(列名);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h4",{attrs:{id:"_3-3-删除索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-删除索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3.3 删除索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("alter table 表名 drop primary key;\nalter table 表名  modify  列名 int, drop primary key;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_4、组合索引-最左前缀匹配"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、组合索引-最左前缀匹配"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4、组合索引(最左前缀匹配)")])]),s._v(" "),n("p",[s._v("组合索引是将n个列组合成一个索引")]),s._v(" "),n("p",[s._v("其应用场景为：频繁的同时使用n列来进行查询，如：where n1 = 'alex' and n2 = 666。")]),s._v(" "),n("h4",{attrs:{id:"_3-1-创建表-索引-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-创建表-索引-2"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3.1 创建表+索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create table in3(\n    nid int not null auto_increment primary key,\n    name varchar(32) not null,\n    email varchar(64) not null,\n    extra text\n)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h4",{attrs:{id:"_3-2-创建组合索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-创建组合索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3.2 创建组合索引")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("create index ix_name_email on in3(name,email);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("strong",[s._v("最左前缀匹配：-也就是说只有从最左边开始，创建的索引才可以生效")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('-- 就是我创建了create index ix_name_email on in3(name,email);有name和email\n\n-- 我查询的时候\n\t生效：\n        select * from from in3 where name="a";\n        select * from from in3 where name="a" and email="b";\n    不生效\n    \tselect * from from in3 where email="b";\n\n-- 也就是说只有从最左边开始，创建的索引才可以生效\n-- 在比如\tin3(1,2,3)\n\t生效：（1，2，3），（1，2），（1，3）\n\t不生效：（2，3），（2），（3）\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[n("strong",[s._v("速度组合索引效率 > 索引合并")])]),s._v(" "),n("p",[s._v("如上创建组合索引之后，查询：")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("name and email -- 使用索引")])]),s._v(" "),n("li",[n("p",[s._v("name -- 使用索引")])]),s._v(" "),n("li",[n("p",[s._v("email -- 不使用索引")])])]),s._v(" "),n("p",[n("strong",[s._v("注意：对于同时搜索n个条件时，组合索引的性能好于多个单一索引合并。")])]),s._v(" "),n("h3",{attrs:{id:"_5、命中索引-正确使用索引"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、命中索引-正确使用索引"}},[s._v("#")]),s._v(" "),n("strong",[s._v("5、命中索引("),n("strong",[s._v("正确使用索引")]),s._v(")")])]),s._v(" "),n("p",[s._v("数据库表中添加索引后确实会让查询速度起飞，但前提必须是正确的使用索引来查询，如果以错误的方式使用，则即使建立索引也会不奏效。\n即使建立索引，索引也不会生效：")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("- like '%xx'\n    select * from tb1 where name like '%cn';\n- 使用函数\n    select * from tb1 where reverse(name) = 'wupeiqi';\n- or\n    select * from tb1 where nid = 1 or email = 'seven@live.com';\n    特别的：当or条件中有未建立索引的列才失效，以下会走索引\n            select * from tb1 where nid = 1 or name = 'seven';\n            select * from tb1 where nid = 1 or email = 'seven@live.com' and name = 'alex'\n- 类型不一致\n    如果列是字符串类型，传入条件是必须用引号引起来，不然...\n    select * from tb1 where name = 999;\n- !=\n    select * from tb1 where name != 'alex'\n    特别的：如果是主键，则还是会走索引\n        select * from tb1 where nid != 123\n- >\n    select * from tb1 where name > 'alex'\n    特别的：如果是主键或索引是整数类型，则还是会走索引\n        select * from tb1 where nid > 123\n        select * from tb1 where num > 123\n- order by\n    select email from tb1 order by name desc;\n    当根据索引排序时候，选择的映射如果不是索引，则不走索引\n    特别的：如果对主键排序，则还是走索引：\n        select * from tb1 order by nid desc;\n\n- 组合索引最左前缀\n    如果组合索引为：(name,email)\n    name and email       -- 使用索引\n    name                 -- 使用索引\n    email                -- 不使用索引\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br")])]),n("h3",{attrs:{id:"_6、其他注意事项"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6、其他注意事项"}},[s._v("#")]),s._v(" "),n("strong",[s._v("6、其他注意事项")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("- 避免使用select *\t!\n- count(1)或count(列) 代替 count(*)  !\n- 创建表时尽量时 char 代替 varchar\t!\n- 表的字段顺序固定长度的字段优先\n- 组合索引代替多个单列索引（经常使用多个条件查询时）\n- 尽量使用短索引\n- 使用连接（JOIN）来代替子查询(Sub-Queries)\n- 连表时注意条件类型需一致\n- 索引散列值（重复少）不适合建索引，例：性别不适合  !\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"_7、-分页"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7、-分页"}},[s._v("#")]),s._v(" "),n("strong",[s._v("7、！分页")])]),s._v(" "),n("p",[s._v("无论是否有索引，limit分页是一个值得关注的问题")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("-- 方法一： 原始查询，速度慢\nselect * from student limit 20000,10;\n\n-- 方法二：覆盖索引（和上面的差不多，快一点点）\nselect * from student where sid in (select * from student limit 20000,10)\n\n-- 方法三：！记录当前页最大或最小ID\n\n-- 1、页面只有上一页和下一页\n-- max_id min_id，（拿到该页面最大和最小的id，因为只有上一页和下一页。所有点击下一页只用拿最大id的后10条，或者最小id的前10条）\n-- 下一页：\nselect * from student where id > max_id limit 10;  --\n-- 上一页\nselect * from student where id < min_id order by id desc limit 10;\n\n-- 2、有页码 上一页 192 193 194 [195] 196 197 198 下一页\n-- max_id min_id，（拿到选择附件的所有数据条数）\n-- 上一页：\n    select *\n    from tb1\n    where\n        nid < (select nid from (select nid from tb1 where nid < 当前页最小值 order by nid desc limit 每页数据 *【页码-当前页】) A order by A.nid asc limit 1)\n    order by nid desc limit 10;\n\n    select *\n    from tb1\n    where\n        nid < (select nid from (select nid from tb1 where nid < 970  order by nid desc limit 40) A order by A.nid asc limit 1)\n    order by nid desc limit 10;\n\n-- 下一页：\n    select *\n    from tb1\n    where\n        nid < (select nid from (select nid from tb1 where nid > 当前页最大值 order by nid asc limit 每页数据 *【当前页-页码】) A order by A.nid asc limit 1)\n    order by nid desc limit 10;\n\n    select *\n    from tb1\n    where\n        nid < (select nid from (select nid from tb1 where nid > 980 order by nid asc limit 20) A order by A.nid desc limit 1)\n    order by nid desc limit 10;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br")])]),n("h2",{attrs:{id:"十、执行时间"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#十、执行时间"}},[s._v("#")]),s._v(" "),n("strong",[s._v("十、执行时间")])]),s._v(" "),n("p",[s._v("详细资料："),n("a",{attrs:{href:"https://www.cnblogs.com/wupeiqi/articles/5716963.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/wupeiqi/articles/5716963.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("explain + 查询SQL - 用于显示SQL执行信息参数，根据参考信息可以进行SQL优化")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("explain select * from (select nid,name from tb1 where nid < 10) as B;\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h2",{attrs:{id:"十一、慢日志查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#十一、慢日志查询"}},[s._v("#")]),s._v(" "),n("strong",[s._v("十一、慢日志查询")])]),s._v(" "),n("p",[s._v("慢查询配置步骤："),n("a",{attrs:{href:"https://www.cnblogs.com/huangguowen/p/10234043.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/huangguowen/p/10234043.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("strong",[s._v("a、配置MySQL自动记录慢日志")])]),s._v(" "),n("blockquote",[n("p",[s._v("slow_query_log = OFF               是否开启慢日志记录\nlong_query_time = 2                时间限制，超过此时间，则记录\nslow_query_log_file = /usr/slow.log     日志文件\nlog_queries_not_using_indexes = OFF   为使用索引的搜索是否记录")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("show variables like '%query%';\t-- 查看当前mysql配置参数\nset global long_query_time=2;  -- 配置超时时间为2秒\nset global slow_query_log_file=\"C:/DESKTOP-GGSJFOA-slow.log\";  -- 日志文件放在哪里\n\nshow variables like 'long_query_time';  -- 值查询超时时间\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[n("em",[s._v("注：查看当前配置信息：")]),s._v("\n　　   _show variables like '%query%'_修改当前配置：\n　　　　"),n("em",[s._v("set global 变量名 = 值")])]),s._v(" "),n("p",[n("strong",[s._v("b、查看MySQL慢日志")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("mysqldumpslow -s at -a  /usr/local/var/mysql/MacBook-Pro-3-slow.log\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("\n--verbose    版本\n--debug      调试\n--help       帮助\n\n-v           版本\n-d           调试模式\n-s ORDER     排序方式\n             what to sort by (al, at, ar, c, l, r, t), 'at' is default\n              al: average lock time\n              ar: average rows sent\n              at: average query time\n               c: count\n               l: lock time\n               r: rows sent\n               t: query time\n-r           反转顺序，默认文件倒序拍。reverse the sort order (largest last instead of first)\n-t NUM       显示前N条just show the top n queries\n-a           不要将SQL中数字转换成N，字符串转换成S。don't abstract all numbers to N and strings to 'S'\n-n NUM       abstract numbers with at least n digits within names\n-g PATTERN   正则匹配；grep: only consider stmts that include this string\n-h HOSTNAME  mysql机器名或者IP；hostname of db server for *-slow.log filename (can be wildcard),\n             default is '*', i.e. match all\n-i NAME      name of server instance (if using mysql.server startup script)\n-l           总时间中不减去锁定时间；don't subtract lock time from total time\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h2",{attrs:{id:"十、python操作mysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#十、python操作mysql"}},[s._v("#")]),s._v(" "),n("strong",[s._v("十、Python操作mysql")])]),s._v(" "),n("h3",{attrs:{id:"_1、pymysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、pymysql"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、pymysql")])]),s._v(" "),n("p",[s._v("参考资料："),n("a",{attrs:{href:"https://www.cnblogs.com/wupeiqi/articles/5713330.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/wupeiqi/articles/5713330.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("菜鸟教程："),n("a",{attrs:{href:"https://www.runoob.com/python3/python3-mysql.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.runoob.com/python3/python3-mysql.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("增删改查的操作")]),s._v(" "),n("h4",{attrs:{id:"_1-1-下载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-下载"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.1 下载")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("pip3 install pymysql\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("\n\n# 用户表\ncreate table userinfo(\n    id int auto_increment primary key,\n    u_name char(16) not null\n)engine=innodb default charset='utf8mb4';\n\n# 权限表\ncreate table perssion(\n    id int auto_increment primary key,\n    p_name char(16) not null\n)engine=innodb default charset='utf8mb4';\n\n# 用户权限关系表\ncreate table user_persstion(\n    id int auto_increment primary key,\n    userinfo_id int not null,\n    perssion_id int not null,\n\t\tunique(userinfo_id,perssion_id),\n    constraint fk1 foreign key (userinfo_id) references userinfo(id),\n    constraint fk2 foreign key (perssion_id) references perssion(id)\n)engine=innodb default charset='utf8mb4';\n\n\nselect p_name,u_name\nfrom user_persstion\n\tleft join userinfo on userinfo.id=user_persstion.perssion_id\n\tleft join perssion on perssion.id=user_persstion.userinfo_id\nwhere u_name like \"B\";\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);