(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{531:function(s,t,a){s.exports=a.p+"assets/img/26.877bf5f2.png"},532:function(s,t,a){s.exports=a.p+"assets/img/27.45b8a088.png"},928:function(s,t,a){"use strict";a.r(t);var n=a(4),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"排序的定义和实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#排序的定义和实现"}},[s._v("#")]),s._v(" "),t("strong",[s._v("排序的定义和实现")])]),s._v(" "),t("h3",{attrs:{id:"_1-1-排序定义"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-排序定义"}},[s._v("#")]),s._v(" "),t("strong",[s._v("1.1 排序定义")])]),s._v(" "),t("p",[s._v("我们每次在排序的服务的时候，都是以 http://127.0.0.1:8000/api/game.json?ordering=-id ，而且排序的字段都是我们自己定义好的，后面的排序字段必须以 ordering定义，不能是其他字段，那这个我们如何在DRF中去实现呐。OrderingFilter类支持简单的查询参数控制结果排序")]),s._v(" "),t("h3",{attrs:{id:"_1-2-排序的实现"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-排序的实现"}},[s._v("#")]),s._v(" "),t("strong",[s._v("1.2 排序的实现")])]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("custom_model_view_set "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" CustomModelViewSet\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" django_filters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("rest_framework "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" DjangoFilterBackend\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("custom_filter "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" GameFilter\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" rest_framework "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" filters\n \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("GameView")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CustomModelViewSet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    queryset "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Game"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("objects"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    serializer_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" GameSerializer\n \n     \n    filter_backends "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("DjangoFilterBackend"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" filters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SearchFilter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("filters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("OrderingFilter"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#加入排序的过滤器")]),s._v("\n \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 过滤")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# filter_fields = ('name', 'status')")]),s._v("\n    filterset_class "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" GameFilter\n \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 搜索")]),s._v("\n    search_fields "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"status"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n     \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#排序")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注意 filter_backends多了一个filters.OrderingFilter")]),s._v("\n    ordering_fields "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'status'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#根据定义的排序字段取排序")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h3",{attrs:{id:"_1-3、postman测试结果"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-3、postman测试结果"}},[s._v("#")]),s._v(" "),t("strong",[s._v("1.3、postman测试结果")])]),s._v(" "),t("p",[s._v("降序：http://127.0.0.1:8000/api/game/?ordering=-id，会根据id降序。")]),s._v(" "),t("p",[t("img",{attrs:{src:a(531),alt:""}})]),s._v(" "),t("p",[s._v("name降序： http://127.0.0.1:8000/api/game/?ordering=-name")]),s._v(" "),t("p",[t("img",{attrs:{src:a(532),alt:""}})])])}),[],!1,null,null,null);t.default=e.exports}}]);