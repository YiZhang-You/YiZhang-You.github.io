(window.webpackJsonp=window.webpackJsonp||[]).push([[201],{938:function(s,n,a){"use strict";a.r(n);var e=a(4),r=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"链接资料"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#链接资料"}},[s._v("#")]),s._v(" 链接资料")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("老男孩：<https://www.cnblogs.com/wupeiqi/articles/7552008.html>\nflask官网插件：<https://flask.palletsprojects.com/en/2.1.x/extensions/>\nflask中文官网：<https://flask.net.cn/>\nflask w3cschool:<https://www.w3cschool.cn/flask/flask_message_flashing.html>\n<http://www.coolpython.net/flask_tutorial/deep-learn/what-is-wsgi.html>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h2",{attrs:{id:"day01"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#day01"}},[s._v("#")]),s._v(" day01")]),s._v(" "),n("p",[s._v("谈谈对pythonWeb框架：")]),s._v(" "),n("ul",[n("li",[s._v("django：大而全，内部提供，ORM、Admin、中间件、From、ModelForm、Session、缓存、信号、CSR等")]),s._v(" "),n("li",[s._v("flask：短小精悍，可扩展强，第三方组件丰富。")]),s._v(" "),n("li",[s._v("tornado：短小精悍+异步非阻塞")]),s._v(" "),n("li",[s._v("其他：\n"),n("ul",[n("li",[n("a",{attrs:{href:"http://web.py",target:"_blank",rel:"noopener noreferrer"}},[s._v("web.py"),n("OutboundLink")],1)]),s._v(" "),n("li",[n("a",{attrs:{href:"http://bottle.py",target:"_blank",rel:"noopener noreferrer"}},[s._v("bottle.py"),n("OutboundLink")],1)])])])]),s._v(" "),n("p",[s._v("wsgi通信")]),s._v(" "),n("ul",[n("li",[n("p",[s._v("django，wsgiref")])]),s._v(" "),n("li",[n("p",[s._v("flask，werkzurg")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from werkzeug.wrappers import Request, Response\nfrom werkzeug.serving import run_simple\n\n@Request.application\ndef hello(request):\n    return Response('Hello World!')\n\nif __name__ == '__main__':\n\n    run_simple('localhost', 4000, hello)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])])])]),s._v(" "),n("h2",{attrs:{id:"作业"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#作业"}},[s._v("#")]),s._v(" "),n("strong",[s._v("作业：")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("作业：\n\n    1. 路飞\n\n    2. Flask\n        - 装饰器实现\n            - 位置\n            - url起别名（不能重复）\n        - 类似django中间件的东西：before_request装饰器\n\n    3. 上下文预习：\n        a. threading.local\n        b.\n            functools.wraps\n            functools.partial\n        c. 面向对象封装\n\n        d. 面向对象中：\n            __setattr__\n            __getattr__\n            __delattr__\n    4. 预习：\n        <http://www.cnblogs.com/wupeiqi/articles/7552008.html>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h2",{attrs:{id:"day02"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#day02"}},[s._v("#")]),s._v(" "),n("strong",[s._v("day02")])]),s._v(" "),n("h2",{attrs:{id:"内容回顾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#内容回顾"}},[s._v("#")]),s._v(" "),n("strong",[s._v("内容回顾")])]),s._v(" "),n("h2",{attrs:{id:"_1-装饰器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-装饰器"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1. 装饰器")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('问题：什么是装饰器？\n        问题：手写装饰器\n        问题：装饰器都在哪里用过？\n\n        import functools\n\n        def wapper(func):\n            @functools.wraps(func)  # 使用__name__可以返回原函数名，不使用的话没有\n            def inner(*args,**kwargs):\n                return func(*args,**kwargs)\n            return inner\n        """\n        1. 执行wapper函数，并将被装饰的函数当做参数。 wapper(index)\n        2. 将第一步的返回值，重新赋值给  新index =  wapper(老index)\n        """\n        @wapper\n        def index(a1):\n            return a1 + 1000\n\n        @wapper\n        def order(a1):\n            return a1 + 1000\n\n        print(index.__name__)\n        print(order.__name__)\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h2",{attrs:{id:"_2-谈谈你对面向对象的认识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-谈谈你对面向对象的认识"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2. 谈谈你对面向对象的认识？")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("- 封装：\n        - 将同一类方法分为一类：方法封装到类中\n        - 将方法中共同的参数封装到对象中：把共用值封装到对象中。\n\n        情况：\n            a. BaseReponse\n                def index(a1,a2,a3,a4,a5,a6,a7):\n                    pass\n\n                # 用户类实现\n                class Foo(object):\n                    def __init__(self,a1,a2,a3,a4,a5,a6,a7):\n                        self.a1 = a1\n                        self.a2 = a2\n                        self.a3 = a3\n                        self.a4 = a4\n                        self.a5 = a5\n                        self.a6 = a6\n                        self.a7 = a7\n\n                def index(obj):\n                    pass\n            b. 给了一些值，将数据加工: django 自定义分页\n\n                class Foo(object):\n                    def __init__(self,a1,a2,a3,a4,a5,a6,a7):\n                        self.a1 = a1\n                        self.a2 = a2\n                        self.a3 = a3\n                        self.a4 = a4\n                        self.a5 = a5\n                        self.a6 = a6\n                        self.a7 = a7\n\n                    def 金条(self):\n                        return self.a1 + self.a2\n\n                    def 手表(self):\n                        return self.a1 + self.a7\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br")])]),n("h3",{attrs:{id:"今日内容"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#今日内容"}},[s._v("#")]),s._v(" "),n("strong",[s._v("今日内容")])]),s._v(" "),n("h3",{attrs:{id:"_1、配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、配置文件"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1、配置文件")])]),s._v(" "),n("h3",{attrs:{id:"a-创建一个配置文件settings-py"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#a-创建一个配置文件settings-py"}},[s._v("#")]),s._v(" "),n("strong",[n("a",{attrs:{href:"http://a.xn--settings-z09lrny8e6up4t7b4ft3z2go0vc.py",target:"_blank",rel:"noopener noreferrer"}},[s._v("a.创建一个配置文件settings.py"),n("OutboundLink")],1)])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('class BaseConfig(object):\n    DEBUG = True  # 公共配置\n    SECRET_KEY = "asudflkjdfadjfakdf"\n\nclass ProductionConfig(BaseConfig):\n    """生产环境"""\n    DEBUG = False\n\nclass DevelopmentConfig(BaseConfig):\n    """开发配置"""\n    pass\n\nclass TestingConfig(BaseConfig):\n    """测试环境"""\n    pass\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"b-在flask中使用配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#b-在flask中使用配置"}},[s._v("#")]),s._v(" "),n("strong",[s._v("b. 在flask中使用配置")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, render_template, redirect\n\napp = Flask(__name__)\n\n# 配置文件\napp.config.from_object(\"settings.DevelopmentConfig\")  # 引入\n\n@app.route('/index', methods=['GET', 'POST'])\ndef index():\n    return \"f\n\nif __name__ == '__main__':\n    app.run()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("h3",{attrs:{id:"其他方式-更多配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#其他方式-更多配置"}},[s._v("#")]),s._v(" "),n("strong",[s._v("其他方式(更多配置)")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 更多配置：<https://www.cnblogs.com/wupeiqi/articles/7552008.html>\n\n方式一：\n    app.config['DEBUG'] = True\n\n    PS： 由于Config对象本质上是字典，所以还可以使用app.config.update(...)\n\n方式二：\n    app.config.from_pyfile(\"python文件名称\")\n        如：\n            settings.py\n                DEBUG = True\n\n            app.config.from_pyfile(\"settings.py\")\n\n    app.config.from_envvar(\"环境变量名称\")\n        环境变量的值为python文件名称名称，内部调用from_pyfile方法\n\n    app.config.from_json(\"json文件名称\")\n        JSON文件名称，必须是json格式，因为内部会执行json.loads\n\n    app.config.from_mapping({'DEBUG':True})\n        字典格式\n\n    app.config.from_object(\"python类或类的路径\")\n\n        app.config.from_object('pro_flask.settings.TestingConfig')\n\n        settings.py\n\n            class Config(object):\n                DEBUG = False\n                TESTING = False\n                DATABASE_URI = 'sqlite://:memory:'\n\n            class ProductionConfig(Config):\n                DATABASE_URI = 'mysql://user@localhost/foo'\n\n            class DevelopmentConfig(Config):\n                DEBUG = True\n\n            class TestingConfig(Config):\n                TESTING = True\n\n        PS: 从sys.path中已经存在路径开始写\n\n    PS: settings.py文件默认路径要放在程序root_path目录，如果instance_relative_config为True，则就是instance_path目录\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br")])]),n("h3",{attrs:{id:"_2、路由"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、路由"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2、路由")])]),s._v(" "),n("h3",{attrs:{id:"_1-添加路由的二种方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-添加路由的二种方式"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1. 添加路由的二种方式")])]),s._v(" "),n("p",[n("strong",[s._v("多看源码")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, render_template, redirect\n\napp = Flask(__name__)\n\n\"\"\"\n1. 执行decorator=app.route('/index',methods=['GET','POST'])\n2. @decorator\n     - decorator(index)\n\n# 内部执行的方法\ndef decorator(f: F) -> F:\n    endpoint = options.pop(\"endpoint\", None)\n    self.add_url_rule(rule, endpoint, f, **options)\n    return f  # 返回函数名\n\nreturn decorator\n\"\"\"\n\n# 路由方式一（*）：\n@app.route('/index', methods=['GET', 'POST'])\ndef index():\n    return \"Index\"\n\n# 路由方式二：\ndef order():\n    return 'Order'\n\napp.add_url_rule('/order', view_func=order)\n\nif __name__ == '__main__':\n    app.run()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("h3",{attrs:{id:"_2-反向生成url-url-for-设置路由的别名-endpoint"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-反向生成url-url-for-设置路由的别名-endpoint"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.反向生成url(url_for)/设置路由的别名(endpoint)")])]),s._v(" "),n("p",[n("strong",[s._v("通过添加endpoint('别名')参数设置别名，默认为函数名。")])]),s._v(" "),n("p",[n("strong",[s._v("通过url_for('别名','参数')得到路由url")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, render_template, redirect, url_for\n\napp = Flask(__name__)\n\n\"\"\"\n通过添加endpoint参数设置别名，默认为函数名，通过url_for('别名')得到路由url\n\"\"\"\n\n@app.route('/index1', methods=['GET', 'POST'], endpoint='n1')  # <http://127.0.0.1:5000/index1>\ndef index():\n    v1 = url_for('n1')\n    v2 = url_for('n2')  # 反向生成url\n    v3 = url_for('logout')\n    print(v1, v2, v3)  # /index1 /login1 /logout1\n    return \"Index\"\n\n@app.route('/login1', methods=['GET', 'POST'], endpoint='n2')\ndef login():\n    return \"login\"\n\n@app.route('/logout1', methods=['GET', 'POST'])\ndef logout():\n    return \"logout\"\n\nif __name__ == '__main__':\n    app.run()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h3",{attrs:{id:"_3-传参数-自定义正则参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-传参数-自定义正则参数"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3.传参数/自定义正则参数")])]),s._v(" "),n("ul",[n("li",[s._v("@app.route('/user/"),n("username",[s._v("')")])],1),s._v(" "),n("li",[s._v("@app.route('/post/int:post_id')")]),s._v(" "),n("li",[s._v("@app.route('/post/float:post_id')")]),s._v(" "),n("li",[s._v("@app.route('/post/path:path')")]),s._v(" "),n("li",[s._v("@app.route('/login', methods=['GET', 'POST'])")])]),s._v(" "),n("p",[s._v("常用路由系统有以上五种，所有的路由系统都是基于一下对应关系来处理：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("DEFAULT_CONVERTERS = {\n    'default':          UnicodeConverter,\n    'string':           UnicodeConverter,\n    'any':              AnyConverter,\n    'path':             PathConverter,\n    'int':              IntegerConverter,\n    'float':            FloatConverter,\n    'uuid':             UUIDConverter,\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[n("strong",[s._v("上面的5种类型有时候满足不了需求，所以就有了自定义路由")])]),s._v(" "),n("p",[s._v("a.编写自定义路由匹配规则，并把新添加的规则放入url_map中")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('# 1\nclass RegexConverter(BaseConverter):\n    """\n    自定义URL匹配正则表达式\n    """\n\n    def __init__(self, map, regex):\n        super(RegexConverter, self).__init__(map)\n        self.regex = regex\n\n    def to_python(self, value):\n        """\n        路由匹配时，匹配成功后传递给视图函数中参数的值（我们可以对值进行变化，正向的：用户调用接口我们拿到的）\n        :param value:\n        :return:\n        """\n        return int(value)\n\n    def to_url(self, value):\n        """\n        使用url_for反向生成URL时，传递的参数经过该方法处理，返回的值用于生成URL中的参数(val：是方向生成url的值)\n        @app.route(\'/index/<xxx("\\\\d+"):nid>\', methods=[\'GET\', \'POST\'])\n        def index(nid):\n            print(nid, type(nid))\n            v = url_for(\'index\', nid=999)  # /index/999\n            print(v)\n            return "Index"\n        :param value:\n        :return:\n        """\n        val = super(RegexConverter, self).to_url(value)\n        return val\n\n# 2\napp.url_map.converters[\'xxx\'] = RegexConverter\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br")])]),n("h3",{attrs:{id:"_4-app-route和app-add-url-rule参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-app-route和app-add-url-rule参数"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4.@app.route和app.add_url_rule参数")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("rule,                       # URL规则\n\nview_func,                  # 视图函数名称\n\ndefaults=None,              # 默认值,当URL中无参数，函数需要参数时，使用defaults={'k':'v'}为函数提供参数（当需要给视图函数提供参数的时候）\n\t@app.route('/index',defaults={'k':'123'})\n\tdef index(k):\n        print(k)  # 123\n\nendpoint=None,              # 名称，用于反向生成URL，即： url_for('名称','参数')\n\nmethods=None,               # 允许的请求方式，如：[\"GET\",\"POST\"]\n\nstrict_slashes=None,        # 对URL最后的 / 符号是否严格要求，(django中一样)\n      如：\n          @app.route('/index',strict_slashes=False)，\n               访问 <http://www.xx.com/index/> 或 <http://www.xx.com/index均可>\n          @app.route('/index',strict_slashes=True)\n               仅访问 <http://www.xx.com/index>\n\nredirect_to=None,           # 重定向到指定地址 当访问/index的时候自动跳转到/home路由上面\n      如：\n          @app.route('/index/<int:nid>', redirect_to='/home/<nid>')  # 重定向到路由\n          def func(adapter, nid):\n             return \"/home/888\"\n          @app.route('/index/<int:nid>', redirect_to=func)  # 重定向到函数\n\nsubdomain=None,             # 获取子域名访问\n\t# 示例一\n    app = Flask(__name__)\n    app.config['SERVER_NAME'] = 'oldboy.com:5000'  # 服务器地址\n\n    \"\"\"\n    www.baidu.com\n    aab.baidu.com  # 子域名aab,www,通过配置获取到子域名\n    1、添加服务器配置\n        app.config['SERVER_NAME'] = 'oldboy.com:5000'  # 服务器地址\n    2、在route中添加subdomain='username'\n        def func(username)  # 接收到子域名\n    \"\"\"\n    @app.route(\"/dynamic\", subdomain=\"<username>\")\n    def xxxxxxx(username):\n        print(username)\n        return 'xxxxx'\n\n\t# 示例二\n\tfrom flask import Flask, views, url_for\n\n    app = Flask(import_name=__name__)\n    app.config['SERVER_NAME'] = 'wupeiqi.com:5000'\n\n    @app.route(\"/\", subdomain=\"admin\")\n    def static_index():\n        return \"static.your-domain.tld\"\n\n    @app.route(\"/dynamic\", subdomain=\"<username>\")\n    def username_index(username):\n        return username + \".your-domain.tld\"\n\n    if __name__ == '__main__':\n        app.run()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br")])]),n("h3",{attrs:{id:"_3、flask视图中使用装饰器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3、flask视图中使用装饰器"}},[s._v("#")]),s._v(" "),n("strong",[s._v("3、flask视图中使用装饰器")])]),s._v(" "),n("p",[s._v("使用装饰器的时候，添加到路由的下面，并在定义装饰器的时候加上@functools.wraps(func)，不加的话会默认返回inner函数(使用"),n("strong",[s._v("name")]),s._v("可以查看)， 如果直接访问inner,没有访问到原来的index(),order()，就会报错")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, render_template, redirect\n\napp = Flask(__name__)\nimport functools\n\n\"\"\"\n使用装饰器的时候，添加到路由的下面，并在定义装饰器的时候加上@functools.wraps(func)，不加的话会默认返回inner函数(使用__name__可以查看)，\n如果直接访问inner,没有访问到原来的index(),order()，就会报错\n\"\"\"\ndef wapper(func):\n    @functools.wraps(func)\n    def inner(*args, **kwargs):\n        print('before')\n        return func(*args, **kwargs)\n\n    return inner\n\n@app.route('/xxxx', methods=['GET', 'POST'])\n@wapper\ndef index():\n    return \"Index\"\n\n@app.route('/order', methods=['GET', 'POST'])\n@wapper\ndef order():\n    return \"order\"\n\nif __name__ == '__main__':\n    app.run()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br")])]),n("h3",{attrs:{id:"_4、视图"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、视图"}},[s._v("#")]),s._v(" "),n("strong",[s._v("4、视图")])]),s._v(" "),n("h3",{attrs:{id:"_1-fbv"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-fbv"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1. FBV")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, render_template, redirect, views\n\napp = Flask(__name__)\nimport functools\n\ndef wapper(func):\n    \"\"\"装饰器\"\"\"\n\n    @functools.wraps(func)\n    def inner(*args, **kwargs):\n        print('before')\n        return func(*args, **kwargs)\n\n    return inner\n\n# FBV\n@app.route('/xxxx', methods=['GET', 'POST'])\n@wapper\ndef index():\n    return \"Index\"\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("h3",{attrs:{id:"_2-cbv"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-cbv"}},[s._v("#")]),s._v(" "),n("strong",[s._v("2.CBV")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# CBV\n# 方式一\n\"\"\"\nclass IndexView(views.View):\n    methods = ['GET']\n    decorators = [wapper, ]\n\n    def dispatch_request(self):\n        print('Index')\n        return 'Index!'\n\napp.add_url_rule('/index', view_func=IndexView.as_view(name='index1'))  # name=endpoint，这里的name就和route(endpoint反向生成一样)\n\"\"\"\n\n# 方式二\nclass IndexView(views.MethodView):\n    methods = ['GET','POST']  # 支持方法\n    decorators = [wapper, ]  # 装饰器\n\n    def get(self):\n        return 'Index.GET'\n\n    def post(self):\n        return 'Index.POST'\n\napp.add_url_rule('/index', view_func=IndexView.as_view(name='index2'))  # name=endpoint\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h3",{attrs:{id:"_5、请求和响应"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_5、请求和响应"}},[s._v("#")]),s._v(" "),n("strong",[s._v("5、请求和响应")])]),s._v(" "),n("p",[n("strong",[s._v("使用时需要导包from flask import request")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("信息看官网：<https://flask.net.cn/quickstart.html#id14>\nfrom flask import Flask, render_template, redirect, request, jsonify, make_response\n\napp = Flask(__name__)\n\n@app.route('/index', methods=['GET', 'POST'])\ndef index():\n    # 请求相关\n    # request.method   方法名\n    # request.args     参数\n    # request.form\n    # request.cookies  cookies\n    # request.headers  请求头\n    # request.path     请求路径\n    # request.files    获取上传文件\n    # obj = request.files['the_file_name']  # 得到上传文件名\n    # obj.save('/var/www/uploads/' + secure_filename(obj.filename))  保存到本地\n\n    # request.values\n    # request.full_path\n    # request.script_root\n    # request.url\n    # request.base_url\n    # request.url_root\n    # request.host_url\n    # request.host\n\n    # 响应相关\n    return \"\"  # 字符串\n    return json.dumps({})  # 字典\n    return jsonify({})   # 内置模块自动转成字典\n    return render_template('index.html', n1=123)  # 模板\n    return redirect('/index')  # 重定向\n\n    # response = make_response(render_template('index.html'))  # 设置返回的cookie，headers等\n    # response = make_response(\"xxxx\")\n    # response.set_cookie('key', 'value')\n    # response.headers['X-Something'] = 'A value'\n    # response.delete_cookie('key')\n    # return response\n\nif __name__ == '__main__':\n    app.run()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br")])]),n("h3",{attrs:{id:"_6、模板的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_6、模板的使用"}},[s._v("#")]),s._v(" "),n("strong",[s._v("6、模板的使用")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Jinja2官网：<http://docs.jinkan.org/docs/jinja2/>\nJinja2基本使用:<https://www.cnblogs.com/ryxiong-blog/articles/11170889.html>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("1、模板的使用")]),s._v(" "),n("p",[s._v("Flask使用的是Jinja2模板，所以其语法和Django无差别")]),s._v(" "),n("p",[s._v("2、自定义模板方法")]),s._v(" "),n("p",[s._v("Flask中自定义模板方法的方式和Bottle相似，创建一个函数并通过参数的形式传入render_template，如：")]),s._v(" "),n("p",[n("strong",[s._v("flask可以传递函数")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("传值：\n\t@app.route('/x1', methods=['GET', 'POST'])\n    def index():\n        context = {\n            'k1': 123,\n            'k2': [11, 22, 33],\n            'k3': {'name': 'oldboy', 'age': 84},\n            'k4': lambda x: x + 1,\n            'k5': gen_input,  # 当前模板才能调用的函数\n        }\n\n        return render_template('index.html', **context)\n使用：\n\t    <h1>{{k1}}</h1>\n        <h1>{{k2.0}}  {{k2[0]}} </h1>\n        <h1>{{k3.name}}  {{k3['name']}}  {{k3.get('name',888)}}</h1>\n        <h1>{{k4(66)}}</h1>\n        <h1>{{k5(99)}}</h1>\n        <h1>{{sbbbbbbb(1,2)}}</h1>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[n("strong",[s._v("全局:每个模板都可以使用这个函数")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('@app.template_global()\ndef sbbbbbbb(a1, a2):\n    """\n    每个模板中可以调用的函数\n    :param a1:\n    :param a2:\n    :return:\n    """\n    return a1 + a2\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"_7、flask中的session"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_7、flask中的session"}},[s._v("#")]),s._v(" "),n("strong",[s._v("7、flask中的session")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("更多操作示例：<https://www.cnblogs.com/wupeiqi/articles/7552008.html>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("除请求对象之外，还有一个 session 对象。它允许你在不同请求间存储特定用户的信息。它是在 Cookies 的基础上实现的，并且对 Cookies 进行密钥签名要使用会话，你需要设置一个密钥。")]),s._v(" "),n("ul",[n("li",[s._v("设置：session['username'] ＝ 'xxx'")]),s._v(" "),n("li",[s._v("删除：session.pop('username', None)")])]),s._v(" "),n("p",[s._v("flask中的session继承了字典，所以字典有的方法session都有，flask是把session存入cookies中，本地不存。")]),s._v(" "),n("p",[s._v("a.设置一把盐，和django一样 app.secret_key = 'sadfasdfasdf'")]),s._v(" "),n("p",[s._v("b.对session进行添加获取删除等操作")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("\"\"\"\n1. 请求刚刚达到\n    ctx = RequestContext(...)\n          - request\n          - session=None\n    ctx.push()\n        ctx.session = SecureCookieSessionInterface.open_session\n\n2. 视图函数\n\n3. 请求结束\n    SecureCookieSessionInterface.save_session()\n\"\"\"\nfrom flask import Flask, session\n\napp = Flask(__name__)\napp.secret_key = 'sadfasdfasdf'\n\n@app.route('/x1')\ndef index():\n    # 去ctx中获取session\n    session['k1'] = 123\n    session['k2'] = 123\n    del session['k2']\n    return \"Index\"\n\n@app.route('/x2')\ndef order():\n    print(session['k1'])\n    return \"Order\"\n\nif __name__ == '__main__':\n    app.run()\n\n    # 1. 请求一旦到来显\n    # app.__call__\n    # app.wsgi_app\n    # app.open_session\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br")])]),n("h3",{attrs:{id:"_8、特殊装饰器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_8、特殊装饰器"}},[s._v("#")]),s._v(" "),n("strong",[s._v("8、特殊装饰器")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("常见装饰器详细说明：<http://www.coolpython.net/flask_tutorial/basic/flask-decorator-hook.html>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("ul",[n("li",[s._v("@app.before_request 执行视图函数之前（从上到下）")]),s._v(" "),n("li",[s._v("@app.after_request 执行视图函数之后（从下到上）")]),s._v(" "),n("li",[n("strong",[s._v("如果before_request有返回值就不执行后面的视图函数")]),s._v("和django类似")])]),s._v(" "),n("p",[n("strong",[s._v("其实就是把装饰的函数放入列表中，after_request就列表反转了一下")])]),s._v(" "),n("p",[s._v("示例一：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, render_template, redirect\n\napp = Flask(__name__)\n\n\"\"\"\nbefore_reuqest = [xxxxxxxxxx1,xxxxxxxxxx2]\n\"\"\"\n\n@app.before_request  # 视图执行之前\ndef xxxxxxxxxx1():\n    print('前1')\n\n@app.before_request\ndef xxxxxxxxxx2():\n    print('前2')\n\n\"\"\"\nafter_request = [oooooooo1,oooooooo2]\n[oooooooo2,oooooooo1,] reversed(after_request)\n\"\"\"\n\n@app.after_request\ndef oooooooo1(response):\n    print('后1')\n    return response\n\n@app.after_request\ndef oooooooo2(response):\n    print('后2')\n    return response\n\n@app.route('/x1', methods=['GET', 'POST'])\ndef x1():\n    print('视图函数x1')\n    return \"视图函数x1\"\n\nif __name__ == '__main__':\n    # app.__call__  # 最先调用call方法\n    app.run()\n\n# 前1 前2  视图函数x1 后2 后1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br")])]),n("p",[s._v("示例二：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, render_template, redirect\napp = Flask(__name__)\n\n@app.before_request\ndef xxxxxxxxxx1():\n    print('前1')\n    return \"不要再来烦我了\"\n\n@app.before_request\ndef xxxxxxxxxx2():\n    print('前2')\n\n@app.after_request\ndef oooooooo1(response):\n    print('后1')\n    return response\n\n@app.after_request\ndef oooooooo2(response):\n    print('后2')\n    return response\n\n@app.route('/x1', methods=['GET', 'POST'])\ndef x1():\n    print('视图函数x1')\n    return \"视图函数x1\"\n\nif __name__ == '__main__':\n    app.__call__\n    app.run()\n# 前1 后2 后1\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("p",[s._v("示例三：接口校验是否登录")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, render_template, redirect, request, session\n\napp = Flask(__name__)\napp.secret_key = 'asdfasdfasdf'\n\n@app.before_request\ndef check_login():\n    if request.path == '/login':  # 登录不用认证\n        return None\n    user = session.get('user_info')  # 其他接口需要认证\n    if not user:\n        return redirect('/login')\n\n@app.route('/login', methods=['GET', 'POST'])\ndef login():\n    return \"视图函数x1\"\n\n@app.route('/index', methods=['GET', 'POST'])\ndef index():\n    print('视图函数x2')\n    return \"视图函数x2\"\n\nif __name__ == '__main__':\n    app.run()\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("h3",{attrs:{id:"其他常见的装饰器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#其他常见的装饰器"}},[s._v("#")]),s._v(" "),n("strong",[s._v("其他常见的装饰器")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("@app.before_first_request  # 第一次请求\ndef before_first_request1():\n    print('before_first_request1')\n\n@app.before_request   # 执行视图之前执行从上到下\ndef before_request1():\n    Request.nnn = 123\n    print('before_request1')\n\n@app.after_request  # 执行视图之后执行从下到上\ndef after_request1(response):\n    print('before_request1', response)\n    return response\n\n@app.errorhandler(404)  # 错误页面装饰器，有错误的时候执行\ndef page_not_found(error):\n    return 'This page does not exist', 404\n\n@app.template_global()  # 模板装饰器，可以在所有的模板中使用\ndef sb(a1, a2):\n    return a1 + a2\n\n@app.template_filter()  # 过滤装饰器\ndef db(a1, a2, a3):\n    return a1 + a2 + a3\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br")])]),n("h3",{attrs:{id:"_9、消息闪现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_9、消息闪现"}},[s._v("#")]),s._v(" "),n("strong",[s._v("9、消息闪现")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<https://www.w3cschool.cn/flask/flask_message_flashing.html>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("flask 提供了一个非常简单的方法来使用闪现系统向用户反馈信息。1、闪现系统使得在一个请求结束的时候记录一个信息，2、并且在下次（且仅在下一次中）请求时访问它返回信息，并删除掉记录，这通常与布局模板结合使用以公开信息。")]),s._v(" "),n("p",[n("strong",[s._v("Flask 模块包含")]),s._v(" flash()** 方法。它将消息传递给下一个请求，该请求通常是一个模板。**")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("flash(message, category)  # 设置\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("其中，")]),s._v(" "),n("ul",[n("li",[n("strong",[s._v("message")]),s._v(" 参数是要闪现的实际消息。")]),s._v(" "),n("li",[n("strong",[s._v("category")]),s._v(" 参数是可选的。它可以是“error”，“info”或“warning”。类别可以在访问的时候通过类别去过滤")])]),s._v(" "),n("p",[s._v("为了从会话中删除消息，模板调用 "),n("strong",[s._v("get_flashed_messages()")]),s._v("。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("get_flashed_messages(with_categories, category_filter)  # 获取并删除\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("两个参数都是可选的。如果接收到的消息具有类别，则第一个参数是元组。第二个参数仅用于显示特定消息。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from flask import Flask, session, flash, get_flashed_messages\n\napp = Flask(__name__)\napp.secret_key = 'asdfasdfasdf'\n\n@app.route('/x1', methods=['GET', 'POST'])\ndef login():\n    flash('我要上向龙1', category='x1')\n    flash('我要上向龙2', category='x2')\n    return \"视图函数x1\"\n\n@app.route('/x2', methods=['GET', 'POST'])\ndef index():\n    data = get_flashed_messages(category_filter=['x1'])\n    print(data)\n    data = get_flashed_messages(category_filter=['x1'])\n    print(data,222)\n    return \"视图函数x2\"\n\nif __name__ == '__main__':\n    app.run()\n\n\"\"\"\n['我要上向龙1', '我要上向龙1']\n['我要上向龙1', '我要上向龙1'] 222\n[]\n[] 222\n 当访问第二次的时候，就为空了 ，只保存一次，调用得到后就删掉其实就是在内部删掉了session.pop()\n 用session也可以做就是session.pop\n\"\"\"\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br")])]),n("h3",{attrs:{id:"_10、flask中间件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_10、flask中间件"}},[s._v("#")]),s._v(" "),n("strong",[s._v("10、flask中间件")])]),s._v(" "),n("p",[s._v("Flask的中间件的性质，就是可以理解为在整个请求的过程的前后定制一些个性化的功能。")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("在flask中，在执行app.run()之后，如果有请求来，会执行app.__call__方法\n通过中间件的方法可以在请求来时之前与来临之后，即执行app.__call__前后执行其他代码，进行一些生命周期的控制\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("ul",[n("li",[s._v("当一个请求刚进来时： 1）.执行app."),n("strong",[s._v("call")]),s._v("方法 2）.然后调用app.wsgi_app方法")]),s._v(" "),n("li",[s._v("如上，重新定义了一个Middleware类，而实际上返回的就是原来的wsgi_app，但是此时我们就可以在新定义的类中，定制/扩展某些动作；如print操作")]),s._v(" "),n("li",[s._v("另外，新定义的Middleware类的"),n("strong",[s._v("call")]),s._v("方法的参数，其实就是environ, start_response这两个参数（原来wsgi_app）的参数")]),s._v(" "),n("li",[n("strong",[s._v("由于在wsgi_app这一步，我们拿到的仅有原生的environ，因此我们做的只能是对原生的environ进行操作；request、session这些都不能导出/操作（因为只有执行app.wsgi_app之后才有这些参数、方法）")])]),s._v(" "),n("li",[s._v("*因为我们在中间减重不能利用请求和响应来做一些事情，所以中间件的应用场景不多；但是当我们相对原生environ做操作时，就可以用中间件了；所以一般会采用before_request等方法")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('from flask import Flask\napp = Flask(__name__)\napp.secret_key = \'asdfasdfasdf\'\n\n@app.route(\'/x2\', methods=[\'GET\', \'POST\'])\ndef index():\n    return "x2"\n\nclass Middleware(object): # 2、\n    def __init__(self, old_wsgi_app):\n        """\n        服务端启动时，自动执行\n        :param old_wsgi_app:\n        """\n        self.old_wsgi_app = old_wsgi_app\n\n    def __call__(self, environ, start_response):\n        """\n        每次有用户请求道来时\n        :param args:\n        :param kwargs:\n        :return:\n        """\n        print(\'before\')\n        from flask import session, request\n        obj = self.old_wsgi_app(environ, start_response)  # 还是原来的wsgi方法，我们可以在这前后做一些操作，比如ip黑名单过滤(拿到environ)。！ 不能用这些，因为是在wsgi_app返回会才有的request、session\n        print(\'after\')\n        return obj\n\nif __name__ == \'__main__\':\n    app.wsgi_app = Middleware(app.wsgi_app)  # 1、\n    app.run()\n    """\n    1.执行app.__call__\n    2.在调用app.wsgi_app方法\n    """\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br")])]),n("h3",{attrs:{id:"_11、蓝图-django的路由分发"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_11、蓝图-django的路由分发"}},[s._v("#")]),s._v(" "),n("strong",[s._v("11、蓝图(django的路由分发)")])]),s._v(" "),n("p",[s._v("规范的分发路由，具体看示例")]),s._v(" "),n("p",[s._v("蓝图用于为应用提供目录划分：")]),s._v(" "),n("p",[s._v("小型应用程序："),n("a",{attrs:{href:"https://files.cnblogs.com/files/wupeiqi/pro_flask_%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E7%9B%AE%E5%BD%95%E7%A4%BA%E4%BE%8B.zip",target:"_blank",rel:"noopener noreferrer"}},[s._v("示例"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<https://files.cnblogs.com/files/wupeiqi/pro_flask_简单应用程序目录示例.zip>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("大型应用程序："),n("a",{attrs:{href:"https://files.cnblogs.com/files/wupeiqi/pro_flask_%E5%A4%A7%E5%9E%8B%E5%BA%94%E7%94%A8%E7%9B%AE%E5%BD%95%E7%A4%BA%E4%BE%8B.zip",target:"_blank",rel:"noopener noreferrer"}},[s._v("示例"),n("OutboundLink")],1)]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("<https://files.cnblogs.com/files/wupeiqi/pro_flask_大型应用目录示例.zip>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("其他：")]),s._v(" "),n("ul",[n("li",[s._v("蓝图URL前缀：xxx = Blueprint('account', "),n("strong",[s._v("name")]),s._v(",url_prefix='/xxx')")]),s._v(" "),n("li",[s._v("蓝图子域名：xxx = Blueprint('account', "),n("strong",[s._v("name")]),s._v(",subdomain='admin')")])]),s._v(" "),n("p",[s._v("前提需要给配置SERVER_NAME： app.config['SERVER_NAME'] = '"),n("a",{attrs:{href:"http://wupeiqi.com:5000",target:"_blank",rel:"noopener noreferrer"}},[s._v("wupeiqi.com:5000"),n("OutboundLink")],1),s._v("'")]),s._v(" "),n("p",[s._v("访问时："),n("a",{attrs:{href:"http://admin.wupeiqi.com:5000/login.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("admin.wupeiqi.com:5000/login.html"),n("OutboundLink")],1)]),s._v(" "),n("h3",{attrs:{id:"_12、补充"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12、补充"}},[s._v("#")]),s._v(" "),n("strong",[s._v("12、补充")])]),s._v(" "),n("h3",{attrs:{id:"_1-生成项目依赖的方式"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-生成项目依赖的方式"}},[s._v("#")]),s._v(" "),n("strong",[s._v("1.生成项目依赖的方式")])]),s._v(" "),n("p",[s._v("方式一：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("pip3 install pipregs\n\n- 生成依赖文件：pipregs ./   # 执行会会在根目录生成一个requirement.txt文件\n- 安装依赖文件  pip instlal -r requirement.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("方式二：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("生成依赖文件：pip freeze > requirements.txt\n安装依赖文件：pip instlal -r requirements.txt\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"_13、函数-方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_13、函数-方法"}},[s._v("#")]),s._v(" "),n("strong",[s._v("13、函数/方法")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("from types import MethodType, FunctionType\n\nclass Foo(object):\n    def fetch(self):\n        pass\n\n# 对象名.方法名 函数\nprint(isinstance(Foo.fetch, MethodType))\nprint(isinstance(Foo.fetch, FunctionType))  # True\n\n# 对象.方法名 方法\nobj = Foo()\nprint(isinstance(obj.fetch, MethodType))  # True\nprint(isinstance(obj.fetch, FunctionType))\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);