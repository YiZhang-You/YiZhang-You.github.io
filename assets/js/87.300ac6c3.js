(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{542:function(s,t,n){s.exports=n.p+"assets/img/4.cd254497.png"},943:function(s,t,n){"use strict";n.r(t);var a=n(4),r=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"pymongorawquery"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pymongorawquery"}},[s._v("#")]),s._v(" pymongoRawQuery")]),s._v(" "),t("blockquote",[t("p",[s._v("版本：1.0.1")]),s._v(" "),t("p",[s._v("作者：益章")]),s._v(" "),t("p",[s._v("邮件：yyz18071720400@163.com")]),s._v(" "),t("p",[s._v("微信：YiZhang_You")])]),s._v(" "),t("h2",{attrs:{id:"功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能"}},[s._v("#")]),s._v(" "),t("strong",[s._v("功能")])]),s._v(" "),t("h3",{attrs:{id:"一、mongodb原生查询"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、mongodb原生查询"}},[s._v("#")]),s._v(" 一、mongodb原生查询")]),s._v(" "),t("p",[s._v("支持mongodb原生语句安全查询数据，拆分校验nosql语句并查询数据（支持find、findOne、sort、limit、skip等一些查询关键字，自动过滤敏感数据库集合以及相应的关键字）")]),s._v(" "),t("h3",{attrs:{id:"二、选择字段、操作、值、值类型以及逻辑符-生成nosql语句并查询数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、选择字段、操作、值、值类型以及逻辑符-生成nosql语句并查询数据"}},[s._v("#")]),s._v(" 二、选择字段、操作、值、值类型以及逻辑符，生成nosql语句并查询数据")]),s._v(" "),t("p",[s._v("支持通过选择字段、操作、值、值类型以及逻辑符，生成nosql语句并查询数据")]),s._v(" "),t("h4",{attrs:{id:"_1-类型于其他连接mongo的筛选工具"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-类型于其他连接mongo的筛选工具"}},[s._v("#")]),s._v(" 1. 类型于其他连接mongo的筛选工具")]),s._v(" "),t("p",[t("img",{attrs:{src:n(542),alt:""}})]),s._v(" "),t("h4",{attrs:{id:"_2-支持常用操作符筛选"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-支持常用操作符筛选"}},[s._v("#")]),s._v(" 2. 支持常用操作符筛选")]),s._v(" "),t("p",[s._v("conditional_operator")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("['$gt', '$gte', '$lt', '$lte', '$eq', '$ne', '$in', '$nin']  # 支持操作符\n\n$gt: 大于\n$gte: 大于等于\n$lt: 小于\n$lte: 小于等于\n$eq: 等于\n$ne: 不等于\n$in: 包含\n$nin: 不包含\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("logical_operatory")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("['$and', '$or', ''] 逻辑运算符\n\n$and: 或\n$or: 且\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("type")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("['int', 'str', 'date', 'obj_id', 'customize']\n\nint: 整型\nstr: 字符串\ndate: 时间\nobj_id: bsonId mognoid\ncustomize: 自定义类型\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"三、获取mongo数据库结构-支持获取mongo数据库的表、集合以及类型结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#三、获取mongo数据库结构-支持获取mongo数据库的表、集合以及类型结构"}},[s._v("#")]),s._v(" 三、获取mongo数据库结构（支持获取mongo数据库的表、集合以及类型结构）")]),s._v(" "),t("h2",{attrs:{id:"操作示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#操作示例"}},[s._v("#")]),s._v(" 操作示例")]),s._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("pip install PyMongoRawQuery=1.0.1")]),s._v(" "),t("h3",{attrs:{id:"nosql原生语句查询示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nosql原生语句查询示例"}},[s._v("#")]),s._v(" nosql原生语句查询示例")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 连接")]),s._v("\ndb "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PyMongoRawQuery"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pwd"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin123"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" database"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. nosql语句")]),s._v("\nnosql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'db.getCollection("col").find({"title" : /.*python.*/i})\'')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 查询返回接口")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" i "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("raw_query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nosql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("\"\"\"\n{'_id': ObjectId('642592a284000000a5006558'), 'title': 'Python教程', 'description': 'python1', 'by': 'bb', 'url': 'xx', 'tags': ['mongodb', 'database', 'NoSQL'], 'likes': 100.0}\n\"\"\"")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("h3",{attrs:{id:"选择筛选条件查询示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#选择筛选条件查询示例"}},[s._v("#")]),s._v(" 选择筛选条件查询示例")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("\"\"\"\n  conditional_operator: ['$gt', '$gte', '$lt', '$lte', '$eq', '$ne', '$in', '$nin']  # 支持操作符\n  logical_operator: ['$and', '$or', '']  # 或与运算\n  type: ['int', 'str', 'date', 'obj_id', 'customize']  # 筛选字段类型\n\n\t固定格式: \n\t[\n\t\t{\n\t\t\t\"field\":\"字段名称\",\n\t\t\t\"conditional_operator\":\"字段操作\",\n\t\t\t\"content\":\"过滤内容\",\n\t\t\t\"logical_operator\":\"逻辑操作\",\n\t\t\t\"type\":\"content类型\"\n\t\t}\n\t\t...\n\t]\n  \"\"\"")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 连接")]),s._v("\ndb "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PyMongoRawQuery"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pwd"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin123"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" database"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 构建添加过滤参数 ")]),s._v("\nrestrictions "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"field"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"title"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询条件字段")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conditional_operator"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$in"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询条件字段操作")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"content"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"P"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询条件字段值（有大小写区分）")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"logical_operator"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$and"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 和后面条件的逻辑操作")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"str"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询条件字段值的类型")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"field"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"description"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询条件字段")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"conditional_operator"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$nin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询条件字段操作")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"content"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询条件字段值（有大小写区分）")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"logical_operator"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$and"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 和后面条件的逻辑操作")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"str"')]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询条件字段值的类型")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3. 查询并返回数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conditional_query"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("restrictions"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'col'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("\"\"\"\n[{'_id': ObjectId('642592a284000000a5006558'), 'title': 'Python教程', 'description': 'python1', 'by': 'bb', 'url': 'xx', 'tags': ['mongodb', 'database', 'NoSQL'], 'likes': 100.0}]\n\"\"\"")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])]),t("h3",{attrs:{id:"获取mogno数据库结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取mogno数据库结构"}},[s._v("#")]),s._v(" 获取mogno数据库结构")]),s._v(" "),t("div",{staticClass:"language-python line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-python"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1. 连接")]),s._v("\ndb "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PyMongoRawQuery"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pwd"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin123"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" database"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2. 查询并返回")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_table_structure_all"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v("\"\"\"\n{'test': {'test': {}, 'col': {'_id': ['bson.objectid.ObjectId'], 'title': ['str'], 'description': ['str'], 'by': ['str'], 'url': ['str'], 'tags': ['list'], 'likes': ['float']}}}\n\"\"\"")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    db "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PyMongoRawQuery"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"127.0.0.1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" pwd"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin123"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" database"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# nosql = \'db.getCollection("col").find({"title" : /.*python.*/i})\'')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# for i in db.raw_query(nosql):")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     print(i)")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     OPERATOR = ['$gt', '$gte', '$lt', '$lte', '$eq', '$ne', '$in', '$nin']  # 支持操作符")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     LOGICAL_OPERATOR = ['$and', '$or', '']  # 或与运算")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     _TYPE = ['int', 'str', 'date', 'obj_id', 'customize']  # 筛选字段类型")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# """')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# restrictions = [")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     {")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "field": "title",  # 查询条件字段')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "conditional_operator": "$in",  # 查询条件字段操作')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "content": "P",  # 查询条件字段值（有大小写区分）')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "logical_operator": "$and",  # 和后面条件的逻辑操作')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "type": "str"  # 查询条件字段值的类型')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     },")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     {")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "field": "description",  # 查询条件字段')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "conditional_operator": "$nin",  # 查询条件字段操作')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "content": "2",  # 查询条件字段值（有大小写区分）')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "logical_operator": "$and",  # 和后面条件的逻辑操作')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#         "type": "str"  # 查询条件字段值的类型')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     }")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ]")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# print(db.conditional_query(restrictions, 'col'))")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("db"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get_table_structure_all"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])])])}),[],!1,null,null,null);t.default=r.exports}}]);