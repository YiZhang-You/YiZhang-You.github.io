(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{1195:function(s,n,a){"use strict";a.r(n);var e=a(4),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h3",{attrs:{id:"redis发布订阅"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis发布订阅"}},[s._v("#")]),s._v(" "),n("strong",[s._v("redis发布订阅")])]),s._v(" "),n("p",[n("a",{attrs:{href:"https://www.cnblogs.com/pyyu/p/10013703.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.cnblogs.com/pyyu/p/10013703.html"),n("OutboundLink")],1)]),s._v(" "),n("p",[s._v("发布publish，订阅subscribe")]),s._v(" "),n("p",[n("strong",[s._v("Redis 通过 PUBLISH 、 SUBSCRIBE 等命令实现了订阅与发布模式。")])]),s._v(" "),n("p",[n("img",{attrs:{src:a(762),alt:""}})]),s._v(" "),n("h4",{attrs:{id:"发布订阅的命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布订阅的命令"}},[s._v("#")]),s._v(" "),n("strong",[s._v("发布订阅的命令")])]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v("PUBLISH channel msg\n    # 将信息 message 发送到指定的频道 channel\npublish qq01 abc\t# 向频道qq01发送abc，频道有几个订阅就会返回对应的数量，没有就返回0\n\nSUBSCRIBE channel [channel ...]\n    # 订阅频道，可以同时订阅多个频道\nsubscribe qq01 qq02  # 同时订阅qq01和qq02频道\n\nUNSUBSCRIBE [channel ...]\n    # 取消订阅指定的频道, 如果不指定频道，则会取消订阅所有频道\nunsubscribe qq01  # 取消订阅qq01这个频道\n\nPSUBSCRIBE pattern [pattern ...]\n    # 订阅一个或多个符合给定模式的频道，每个模式以 * 作为匹配符，比如 it* 匹配所    有以 it 开头的频道( it.news 、 it.blog 、 it.tweets 等等)， news.* 匹配所有    以 news. 开头的频道( news.it 、 news.global.today 等等)，诸如此类\npsubscribe pattern*\t\t# 使用通配符订阅一个或者多个频道\n\nPUNSUBSCRIBE [pattern [pattern ...]]\n    # 退订指定的规则, 如果没有参数则会退订所有规则\npunsubscribe qq01  # 退订指定的规则\n\nPUBSUB subcommand [argument [argument ...]]\n    #查看订阅与发布系统状态\nPUBSUB CHANNELS\t# 订阅的使用频道\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[n("strong",[s._v("注意：使用发布订阅模式实现的消息队列，当有客户端订阅channel后只能收到后续发布到该频道的消息，之前发送的不会缓存，必须Provider和Consumer同时在线。")])]),s._v(" "),n("h4",{attrs:{id:"发布订阅实验一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#发布订阅实验一"}},[s._v("#")]),s._v(" "),n("strong",[s._v("发布订阅实验一")])]),s._v(" "),n("p",[s._v("一个人有二个qq群(qq01,qq02)，")]),s._v(" "),n("p",[s._v("1、官方向不同qq群发送不同的消息，qq01:aaaa qq02:bbbb")]),s._v(" "),n("p",[s._v("2、官方群发一个：都是SB")]),s._v(" "),n("p",[s._v("qq群：qq01\tqq02")]),s._v(" "),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('127.0.0.1:6379> subscribe qq01 qq02\t\t# 订阅二个qq群\nReading messages... (press Ctrl-C to quit)\n1) "subscribe"\n2) "qq01"\n3) (integer) 1\n1) "subscribe"\n2) "qq02"\n3) (integer) 2\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("div",{staticClass:"language-Plain Text line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-plain"}},[n("code",[s._v('# 1、给qq01群发布消息\n127.0.0.1:6379> publish qq01 aaaa\n(integer) 1\n# 接收\n1) "message"\n2) "qq01"\n3) "aaaa"\n\n# 2、给qq02群发布消息\n127.0.0.1:6379> publish qq02 bbbb\n(integer) 1\n# 接收\n1) "message"\n2) "qq02"\n3) "bbbb"\n\n# 3、官方群发 qq01,qq02\n# ！publish只能一次一次的发,不能使用*号，单个PSUBSCRIBE wang*订阅多个可以\npublish qq01 sb\npublish qq02 sb\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])])])}),[],!1,null,null,null);n.default=t.exports},762:function(s,n,a){s.exports=a.p+"assets/img/2023052414252665.44e8f9c0.png"}}]);